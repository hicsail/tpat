{"ast":null,"code":"// const express = require(\"express\");\n// const AWS = require(\"aws-sdk\");\n// const s3 = new AWS.S3({\n//   region: \"us-east-2\",\n// });\n// const { v4: uuidv4 } = require(\"uuid\");\n// const cors = require(\"cors\");\n// const app = express();\n// app.use(cors());\n// app.get(\"/get-signed-url\", async (req, res) => {\n//   await s3.createPresignedPost(\n//     {\n//       Fields: {\n//         key: uuidv4(),\n//       },\n//       Conditions: [\n//         [\"starts-with\", \"$Content-Type\", \"web3/\"],\n//         [\"content-length-range\", 0, 1000000],\n//       ],\n//       Expires: 30,\n//       Bucket: \"tpat\",\n//     },\n//     (err, signed) => {\n//       res.json(signed);\n//     }\n//   );\n// });\n// app.listen(8080);\nimport { S3Client, AbortMultipartUploadCommand, PutObjectCommand } from \"@aws-sdk/client-s3\"; // Set the parameters\n\nexport const uploadParams = {\n  Bucket: \"tpatvideos\",\n  // Add the required 'Key' parameter using the 'path' module.\n  Key: \"video Key\",\n  // Add the required 'Body' parameter\n  Body: {\n    fileStream: \"jlkhlkjhlkh\"\n  }\n}; // function uploadVideo(videoUri) {\n//     const videoBlob = await fetch(videoUri);\n//     uploadTos3(videoBlob);\n// }\n\nasync function uploadTos3(videoBlob) {\n  const s3Client = gets3Client();\n\n  try {\n    uploadParams.Body = videoBlob;\n    const data = await s3Client.send(new PutObjectCommand(uploadParams));\n    console.log(\"Success\", data);\n    return data; // For unit tests.\n  } catch (err) {\n    console.log(\"Error sfsd\", err);\n  }\n}\n\nfunction gets3Client() {\n  const client = new S3Client({\n    region: \"us-east-2\",\n    credentials: {\n      accessKeyId: \"AKIAR4AR4PW6KXERGY7I\",\n      secretAccessKey: \"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\"\n    }\n  });\n  return client;\n}\n\nexport { gets3Client, uploadTos3 };","map":{"version":3,"names":["S3Client","AbortMultipartUploadCommand","PutObjectCommand","uploadParams","Bucket","Key","Body","fileStream","uploadTos3","videoBlob","s3Client","gets3Client","data","send","console","log","err","client","region","credentials","accessKeyId","secretAccessKey"],"sources":["/Users/mannysa/SAIL projects/tpat/src/utils/videoUploadUtils.js"],"sourcesContent":["// const express = require(\"express\");\n// const AWS = require(\"aws-sdk\");\n// const s3 = new AWS.S3({\n//   region: \"us-east-2\",\n// });\n// const { v4: uuidv4 } = require(\"uuid\");\n// const cors = require(\"cors\");\n\n// const app = express();\n\n// app.use(cors());\n\n// app.get(\"/get-signed-url\", async (req, res) => {\n//   await s3.createPresignedPost(\n//     {\n//       Fields: {\n//         key: uuidv4(),\n//       },\n//       Conditions: [\n//         [\"starts-with\", \"$Content-Type\", \"web3/\"],\n//         [\"content-length-range\", 0, 1000000],\n//       ],\n//       Expires: 30,\n//       Bucket: \"tpat\",\n//     },\n//     (err, signed) => {\n//       res.json(signed);\n//     }\n//   );\n// });\n\n// app.listen(8080);\n\nimport {\n  S3Client,\n  AbortMultipartUploadCommand,\n  PutObjectCommand,\n} from \"@aws-sdk/client-s3\";\n// Set the parameters\nexport const uploadParams = {\n  Bucket: \"tpatvideos\",\n  // Add the required 'Key' parameter using the 'path' module.\n  Key: \"video Key\",\n  // Add the required 'Body' parameter\n  Body: { fileStream: \"jlkhlkjhlkh\" },\n};\n\n// function uploadVideo(videoUri) {\n//     const videoBlob = await fetch(videoUri);\n//     uploadTos3(videoBlob);\n\n// }\n\nasync function uploadTos3(videoBlob) {\n  const s3Client = gets3Client();\n  try {\n    uploadParams.Body = videoBlob;\n    const data = await s3Client.send(new PutObjectCommand(uploadParams));\n    console.log(\"Success\", data);\n    return data; // For unit tests.\n  } catch (err) {\n    console.log(\"Error sfsd\", err);\n  }\n}\n\nfunction gets3Client() {\n  const client = new S3Client({\n    region: \"us-east-2\",\n    credentials: {\n      accessKeyId: \"AKIAR4AR4PW6KXERGY7I\",\n      secretAccessKey: \"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\",\n    },\n  });\n\n  return client;\n}\n\nexport { gets3Client, uploadTos3 };\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA,SACEA,QADF,EAEEC,2BAFF,EAGEC,gBAHF,QAIO,oBAJP,C,CAKA;;AACA,OAAO,MAAMC,YAAY,GAAG;EAC1BC,MAAM,EAAE,YADkB;EAE1B;EACAC,GAAG,EAAE,WAHqB;EAI1B;EACAC,IAAI,EAAE;IAAEC,UAAU,EAAE;EAAd;AALoB,CAArB,C,CAQP;AACA;AACA;AAEA;;AAEA,eAAeC,UAAf,CAA0BC,SAA1B,EAAqC;EACnC,MAAMC,QAAQ,GAAGC,WAAW,EAA5B;;EACA,IAAI;IACFR,YAAY,CAACG,IAAb,GAAoBG,SAApB;IACA,MAAMG,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAT,CAAc,IAAIX,gBAAJ,CAAqBC,YAArB,CAAd,CAAnB;IACAW,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBH,IAAvB;IACA,OAAOA,IAAP,CAJE,CAIW;EACd,CALD,CAKE,OAAOI,GAAP,EAAY;IACZF,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BC,GAA1B;EACD;AACF;;AAED,SAASL,WAAT,GAAuB;EACrB,MAAMM,MAAM,GAAG,IAAIjB,QAAJ,CAAa;IAC1BkB,MAAM,EAAE,WADkB;IAE1BC,WAAW,EAAE;MACXC,WAAW,EAAE,sBADF;MAEXC,eAAe,EAAE;IAFN;EAFa,CAAb,CAAf;EAQA,OAAOJ,MAAP;AACD;;AAED,SAASN,WAAT,EAAsBH,UAAtB"},"metadata":{},"sourceType":"module"}