{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.captureThumb = void 0;\n\nvar captureThumb = function captureThumb(videoTag) {\n  return new Promise(function (resolve, reject) {\n    var canvas = document.createElement('canvas');\n    canvas.width = videoTag.videoWidth;\n    canvas.height = videoTag.videoHeight;\n    canvas.getContext('2d').drawImage(videoTag, 0, // top\n    0, // left\n    videoTag.videoWidth, videoTag.videoHeight);\n    canvas.toBlob(function (thumbnail) {\n      resolve(thumbnail);\n    }, 'image/jpeg');\n  });\n};\n\nexports.captureThumb = captureThumb;\n\nvar getVideoInfo = function getVideoInfo(videoBlob) {\n  return new Promise(function (resolve, reject) {\n    var videoTag = document.createElement('video');\n    videoTag.preload = 'metadata';\n    videoTag.muted = true;\n    videoTag.defaultMuted = true;\n    videoTag.playsInline = true;\n    videoTag.autoplay = true;\n    var resolved = false;\n\n    var handleTimeout = function handleTimeout() {\n      resolved = true;\n      resolve({\n        duration: null,\n        thumbnail: null\n      });\n      videoTag.removeEventListener && videoTag.removeEventListener('loadeddata', handleLoadedData);\n      window.URL.revokeObjectURL(videoTag.src);\n    };\n\n    var timeout = setTimeout(handleTimeout, 1000);\n\n    var handleVideoTag = function handleVideoTag(duration) {\n      captureThumb(videoTag).then(function (thumbnail) {\n        videoTag.pause();\n\n        if (!resolved) {\n          clearTimeout(timeout);\n          resolved = true;\n          resolve({\n            duration: duration,\n            thumbnail: thumbnail\n          });\n        }\n\n        window.URL.revokeObjectURL(videoTag.src);\n      })[\"catch\"](function (err) {\n        if (!resolved) {\n          clearTimeout(timeout);\n          resolved = true;\n          reject(err);\n        }\n      });\n    };\n\n    var handleLoadedData = function handleLoadedData() {\n      var duration = videoTag.duration * 1000;\n\n      if (videoTag.duration === Infinity) {\n        videoTag.currentTime = Number.MAX_SAFE_INTEGER;\n\n        videoTag.ontimeupdate = function () {\n          videoTag.ontimeupdate = null;\n          duration = videoTag.duration * 1000;\n          videoTag.currentTime = 0;\n          handleVideoTag(duration);\n        };\n      } else {\n        handleVideoTag(duration);\n      }\n    };\n\n    videoTag.addEventListener('loadeddata', handleLoadedData);\n    videoTag.src = window.URL.createObjectURL(videoBlob);\n  });\n};\n\nvar _default = getVideoInfo;\nexports[\"default\"] = _default;","map":{"version":3,"names":["Object","defineProperty","exports","value","captureThumb","videoTag","Promise","resolve","reject","canvas","document","createElement","width","videoWidth","height","videoHeight","getContext","drawImage","toBlob","thumbnail","getVideoInfo","videoBlob","preload","muted","defaultMuted","playsInline","autoplay","resolved","handleTimeout","duration","removeEventListener","handleLoadedData","window","URL","revokeObjectURL","src","timeout","setTimeout","handleVideoTag","then","pause","clearTimeout","err","Infinity","currentTime","Number","MAX_SAFE_INTEGER","ontimeupdate","addEventListener","createObjectURL","_default"],"sources":["/Users/so._.may._.see._.macy/tpat/node_modules/react-video-recorder/lib/get-video-info.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.captureThumb = void 0;\n\nvar captureThumb = function captureThumb(videoTag) {\n  return new Promise(function (resolve, reject) {\n    var canvas = document.createElement('canvas');\n    canvas.width = videoTag.videoWidth;\n    canvas.height = videoTag.videoHeight;\n    canvas.getContext('2d').drawImage(videoTag, 0, // top\n    0, // left\n    videoTag.videoWidth, videoTag.videoHeight);\n    canvas.toBlob(function (thumbnail) {\n      resolve(thumbnail);\n    }, 'image/jpeg');\n  });\n};\n\nexports.captureThumb = captureThumb;\n\nvar getVideoInfo = function getVideoInfo(videoBlob) {\n  return new Promise(function (resolve, reject) {\n    var videoTag = document.createElement('video');\n    videoTag.preload = 'metadata';\n    videoTag.muted = true;\n    videoTag.defaultMuted = true;\n    videoTag.playsInline = true;\n    videoTag.autoplay = true;\n    var resolved = false;\n\n    var handleTimeout = function handleTimeout() {\n      resolved = true;\n      resolve({\n        duration: null,\n        thumbnail: null\n      });\n      videoTag.removeEventListener && videoTag.removeEventListener('loadeddata', handleLoadedData);\n      window.URL.revokeObjectURL(videoTag.src);\n    };\n\n    var timeout = setTimeout(handleTimeout, 1000);\n\n    var handleVideoTag = function handleVideoTag(duration) {\n      captureThumb(videoTag).then(function (thumbnail) {\n        videoTag.pause();\n\n        if (!resolved) {\n          clearTimeout(timeout);\n          resolved = true;\n          resolve({\n            duration: duration,\n            thumbnail: thumbnail\n          });\n        }\n\n        window.URL.revokeObjectURL(videoTag.src);\n      })[\"catch\"](function (err) {\n        if (!resolved) {\n          clearTimeout(timeout);\n          resolved = true;\n          reject(err);\n        }\n      });\n    };\n\n    var handleLoadedData = function handleLoadedData() {\n      var duration = videoTag.duration * 1000;\n\n      if (videoTag.duration === Infinity) {\n        videoTag.currentTime = Number.MAX_SAFE_INTEGER;\n\n        videoTag.ontimeupdate = function () {\n          videoTag.ontimeupdate = null;\n          duration = videoTag.duration * 1000;\n          videoTag.currentTime = 0;\n          handleVideoTag(duration);\n        };\n      } else {\n        handleVideoTag(duration);\n      }\n    };\n\n    videoTag.addEventListener('loadeddata', handleLoadedData);\n    videoTag.src = window.URL.createObjectURL(videoBlob);\n  });\n};\n\nvar _default = getVideoInfo;\nexports[\"default\"] = _default;"],"mappings":"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"},"metadata":{},"sourceType":"script"}