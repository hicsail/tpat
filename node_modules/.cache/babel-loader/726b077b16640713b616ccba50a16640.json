{"ast":null,"code":"/**\n * dynamic-watermark\n *\n *\n * Copyright (c) 2017 Navjot Dhanawat\n * Licensed under the MIT license.\n */\n\n/**\n * Dynamic Watermark is npm watermark module to add watermark over image.\n * It can add image as well as text watermark on given positions.\n * @param  {options}\n * @return {callback}\n */\nvar gm = require('gm');\n\nvar embed = function (options, callback) {\n  var source = options.source; // Source file path\n\n  var logo = options.logo; // Logo file path\n\n  var ext = source.split('.').pop();\n  var destination = options.destination; // Destination file path\n\n  /**\n  * Left bottom: X = 10, Y = logoY\n  * Right bottom: X = logoX, Y = logoY\n  * Left Top: X = 10, Y = 10\n  * Right Top: X = logoX, Y = 10\n  */\n\n  var position = options.position; //'right-bottom';\n\n  var type = options.type; //'text';\n\n  var text = options.text ? options.text : '';\n  gm(source).size(function (err, size) {\n    if (!err) {\n      var logoWidth = size.width / 10;\n      var logoHeight = size.height / 10;\n      var logoX = size.width - size.width / 8;\n      var logoY = size.height - size.height / 8;\n\n      switch (position) {\n        case 'left-top':\n          var logoX = 10;\n          var logoY = 10;\n          break;\n\n        case 'left-bottom':\n          var logoX = 10;\n          var logoY = size.height - size.height / 8;\n          break;\n\n        case 'right-top':\n          var logoX = size.width - size.width / 8;\n          var logoY = 10;\n          break;\n\n        default:\n          if (typeof position == 'object') {\n            var logoWidth = position.logoWidth;\n            var logoHeight = position.logoHeight;\n            var logoX = position.logoX;\n            var logoY = position.logoY;\n          }\n\n          break;\n      }\n\n      if (type === 'text') {\n        var textColor = options.textOption ? options.textOption.color : '#000000';\n        var fontSize = options.textOption ? options.textOption.fontSize : 20;\n        gm(source).fill(textColor).drawText(logoX, logoY, text).fontSize(fontSize + 'px').write(destination, function (e) {\n          console.log(e || 'Text Watermark Done. Path : ' + destination); // What would you like to do here?\n\n          if (!e) {\n            callback({\n              status: 1\n            });\n          } else {\n            callback({\n              status: 0\n            });\n          }\n        });\n      } else {\n        gm(source).draw(['image over ' + logoX + ',' + logoY + ' ' + logoWidth + ',' + logoHeight + ' ' + logo]).write(destination, function (e) {\n          console.log(e || 'Image Watermark Done. Path : ' + destination); // What would you like to do here?\n\n          if (!e) {\n            callback({\n              status: 1\n            });\n          } else {\n            callback({\n              status: 0\n            });\n          }\n        });\n      }\n    } else {\n      console.log(err);\n    }\n  });\n};\n\nmodule.exports.embed = embed;","map":{"version":3,"names":["gm","require","embed","options","callback","source","logo","ext","split","pop","destination","position","type","text","size","err","logoWidth","width","logoHeight","height","logoX","logoY","textColor","textOption","color","fontSize","fill","drawText","write","e","console","log","status","draw","module","exports"],"sources":["/Users/so._.may._.see._.macy/Desktop/tpat/node_modules/dynamic-watermark/index.js"],"sourcesContent":["/**\n * dynamic-watermark\n *\n *\n * Copyright (c) 2017 Navjot Dhanawat\n * Licensed under the MIT license.\n */\n\n/**\n * Dynamic Watermark is npm watermark module to add watermark over image.\n * It can add image as well as text watermark on given positions.\n * @param  {options}\n * @return {callback}\n */\n\n\nvar gm = require('gm');\n\nvar embed = function (options, callback) {\n\n    var source = options.source;   // Source file path\n    var logo = options.logo;   // Logo file path\n    var ext = source.split('.').pop();\n    var destination = options.destination; // Destination file path\n\n    /**\n    * Left bottom: X = 10, Y = logoY\n    * Right bottom: X = logoX, Y = logoY\n    * Left Top: X = 10, Y = 10\n    * Right Top: X = logoX, Y = 10\n    */\n\n    var position = options.position;   //'right-bottom';\n    var type = options.type;    //'text';\n    var text = options.text ? options.text : '';\n    gm(source)\n        .size(function (err, size) {\n\n            if (!err) {\n                var logoWidth = (size.width / 10);\n                var logoHeight = (size.height / 10);\n                var logoX = size.width - (size.width / 8);\n                var logoY = size.height - (size.height / 8);\n\n                switch (position) {\n                    case 'left-top':\n                        var logoX = 10;\n                        var logoY = 10;\n                        break;\n\n                    case 'left-bottom':\n                        var logoX = 10;\n                        var logoY = size.height - (size.height / 8);\n                        break;\n\n                    case 'right-top':\n                        var logoX = size.width - (size.width / 8);\n                        var logoY = 10;\n                        break;\n                    default:\n                        if (typeof position == 'object') {\n                            var logoWidth = position.logoWidth;\n                            var logoHeight = position.logoHeight;\n                            var logoX = position.logoX;\n                            var logoY = position.logoY;\n                        }\n                        break;\n                }\n\n                if (type === 'text') {\n\n                    var textColor = options.textOption ? options.textOption.color : '#000000';\n                    var fontSize = options.textOption ? options.textOption.fontSize : 20;\n\n                    gm(source)\n                        .fill(textColor)\n                        .drawText(logoX, logoY, text)\n                        .fontSize( fontSize + 'px' )\n                        .write(destination, function (e) {\n                            console.log(e || 'Text Watermark Done. Path : ' + destination); // What would you like to do here?\n                            if (!e) {\n                                callback({ status: 1 });\n                            } else {\n                                callback({ status: 0 });\n                            }\n                        });\n                } else {\n                    gm(source)\n                        .draw(['image over ' + logoX + ',' + logoY + ' ' + logoWidth + ',' + logoHeight + ' ' + logo])\n                        .write(destination, function (e) {\n                            console.log(e || 'Image Watermark Done. Path : ' + destination); // What would you like to do here?\n                            if (!e) {\n                                callback({ status: 1 });\n                            } else {\n                                callback({ status: 0 });\n                            }\n                        });\n                }\n            } else {\n                console.log(err);\n            }\n        });\n};\n\nmodule.exports.embed = embed;"],"mappings":"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"},"metadata":{},"sourceType":"script"}