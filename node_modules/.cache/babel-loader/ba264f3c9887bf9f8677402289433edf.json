{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mannysa/SAIL projects/tpat/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/mannysa/SAIL projects/tpat/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{S3Client,PutObjectCommand}from\"@aws-sdk/client-s3\";var TPAT_VIDEOS_BUCKET=\"tpatvideos\";/**\n * @param videoBlob \n * @param metadata  example metadata =   {\n        username: \"Teacher 1\",\n        email: \"teacher@gmail.com\",\n        taskId: \"1\",\n      },\n * @returns \n */function uploadTos3(_x,_x2){return _uploadTos.apply(this,arguments);}function _uploadTos(){_uploadTos=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(videoBlob,metadata){var s3Client,uploadParams,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:s3Client=gets3Client();_context.prev=1;uploadParams={Bucket:TPAT_VIDEOS_BUCKET,Body:videoBlob,//key format : Timestamp + username + taskId. aids sorting in aws\nKey:Date.now()+metadata.name.replace(/\\s/g,\"\")+//remove whitespace from name\n\"task\"+metadata.taskId+\".webm\",Metadata:metadata};_context.next=5;return s3Client.send(new PutObjectCommand(uploadParams));case 5:data=_context.sent;console.log(\"Success\",data);return _context.abrupt(\"return\",data);case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);console.log(\"Error sfsd\",_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[1,10]]);}));return _uploadTos.apply(this,arguments);}function gets3Client(){var client=new S3Client({region:\"us-east-2\",credentials:{accessKeyId:\"AKIAR4AR4PW6KXERGY7I\",secretAccessKey:\"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\"}});return client;}export{gets3Client,uploadTos3};","map":{"version":3,"names":["S3Client","PutObjectCommand","TPAT_VIDEOS_BUCKET","uploadTos3","videoBlob","metadata","s3Client","gets3Client","uploadParams","Bucket","Body","Key","Date","now","name","replace","taskId","Metadata","send","data","console","log","client","region","credentials","accessKeyId","secretAccessKey"],"sources":["/Users/mannysa/SAIL projects/tpat/src/utils/videoUploadUtils.js"],"sourcesContent":["import { S3Client, PutObjectCommand } from \"@aws-sdk/client-s3\";\n\nconst TPAT_VIDEOS_BUCKET = \"tpatvideos\";\n\n/**\n * @param videoBlob \n * @param metadata  example metadata =   {\n        username: \"Teacher 1\",\n        email: \"teacher@gmail.com\",\n        taskId: \"1\",\n      },\n * @returns \n */\nasync function uploadTos3(videoBlob, metadata) {\n  const s3Client = gets3Client();\n  try {\n    const uploadParams = {\n      Bucket: TPAT_VIDEOS_BUCKET,\n      Body: videoBlob,\n      //key format : Timestamp + username + taskId. aids sorting in aws\n      Key:\n        Date.now() +\n        metadata.name.replace(/\\s/g, \"\") + //remove whitespace from name\n        \"task\" +\n        metadata.taskId +\n        \".webm\",\n      Metadata: metadata,\n    };\n    const data = await s3Client.send(new PutObjectCommand(uploadParams));\n    console.log(\"Success\", data);\n    return data;\n  } catch (err) {\n    console.log(\"Error sfsd\", err);\n  }\n}\n\nfunction gets3Client() {\n  const client = new S3Client({\n    region: \"us-east-2\",\n    credentials: {\n      accessKeyId: \"AKIAR4AR4PW6KXERGY7I\",\n      secretAccessKey: \"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\",\n    },\n  });\n\n  return client;\n}\n\nexport { gets3Client, uploadTos3 };\n"],"mappings":"8PAAA,OAASA,QAAT,CAAmBC,gBAAnB,KAA2C,oBAA3C,CAEA,GAAMC,mBAAkB,CAAG,YAA3B,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G,QACeC,W,6IAAf,iBAA0BC,SAA1B,CAAqCC,QAArC,mJACQC,QADR,CACmBC,WAAW,EAD9B,iBAGUC,YAHV,CAGyB,CACnBC,MAAM,CAAEP,kBADW,CAEnBQ,IAAI,CAAEN,SAFa,CAGnB;AACAO,GAAG,CACDC,IAAI,CAACC,GAAL,GACAR,QAAQ,CAACS,IAAT,CAAcC,OAAd,CAAsB,KAAtB,CAA6B,EAA7B,CADA,CACmC;AACnC,MAFA,CAGAV,QAAQ,CAACW,MAHT,CAIA,OATiB,CAUnBC,QAAQ,CAAEZ,QAVS,CAHzB,uBAeuBC,SAAQ,CAACY,IAAT,CAAc,GAAIjB,iBAAJ,CAAqBO,YAArB,CAAd,CAfvB,QAeUW,IAfV,eAgBIC,OAAO,CAACC,GAAR,CAAY,SAAZ,CAAuBF,IAAvB,EAhBJ,gCAiBWA,IAjBX,4DAmBIC,OAAO,CAACC,GAAR,CAAY,YAAZ,cAnBJ,qE,4CAuBA,QAASd,YAAT,EAAuB,CACrB,GAAMe,OAAM,CAAG,GAAItB,SAAJ,CAAa,CAC1BuB,MAAM,CAAE,WADkB,CAE1BC,WAAW,CAAE,CACXC,WAAW,CAAE,sBADF,CAEXC,eAAe,CAAE,0CAFN,CAFa,CAAb,CAAf,CAQA,MAAOJ,OAAP,CACD,CAED,OAASf,WAAT,CAAsBJ,UAAtB"},"metadata":{},"sourceType":"module"}