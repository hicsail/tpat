{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _lodash = _interopRequireDefault(require(\"lodash.merge\"));\n\nvar _styledComponents = _interopRequireWildcard(require(\"styled-components\"));\n\nvar _fixWebmDuration = _interopRequireDefault(require(\"fix-webm-duration\"));\n\nvar _unsupportedView = _interopRequireDefault(require(\"./defaults/unsupported-view\"));\n\nvar _errorView = _interopRequireDefault(require(\"./defaults/error-view\"));\n\nvar _disconnectedView = _interopRequireDefault(require(\"./defaults/disconnected-view\"));\n\nvar _loadingView = _interopRequireDefault(require(\"./defaults/loading-view\"));\n\nvar _switchCameraView = _interopRequireDefault(require(\"./defaults/switch-camera-view\"));\n\nvar _renderActions = _interopRequireDefault(require(\"./defaults/render-actions\"));\n\nvar _getVideoInfo = _interopRequireWildcard(require(\"./get-video-info\"));\n\nvar _customErrors = require(\"./custom-errors\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar MIME_TYPES = ['video/webm;codecs=\"vp8,opus\"', 'video/webm;codecs=h264', 'video/webm;codecs=vp9', 'video/webm', 'video/mp4'];\nvar CONSTRAINTS = {\n  audio: true,\n  video: true\n};\n\nvar Wrapper = _styledComponents[\"default\"].div.withConfig({\n  displayName: \"video-recorder__Wrapper\",\n  componentId: \"sc-7k20rv-0\"\n})([\"position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%;overflow:hidden;min-height:300px;background-color:#000;color:white;box-sizing:border-box;*{box-sizing:inherit;}\"]);\n\nvar CameraView = _styledComponents[\"default\"].div.withConfig({\n  displayName: \"video-recorder__CameraView\",\n  componentId: \"sc-7k20rv-1\"\n})([\"width:100%;height:100%;\"]);\n\nvar Video = _styledComponents[\"default\"].video.withConfig({\n  displayName: \"video-recorder__Video\",\n  componentId: \"sc-7k20rv-2\"\n})([\"position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);min-height:100%;min-width:100%;width:100%;height:100%;object-fit:cover;\", \";\", \";\"], function (props) {\n  return props.isFlipped && (0, _styledComponents.css)([\"transform:translate(-50%,-50%) scaleX(-1);\"]);\n}, function (props) {\n  return props.onClick && (0, _styledComponents.css)([\"cursor:pointer;\"]);\n});\n\nvar VideoRecorder = /*#__PURE__*/function (_Component) {\n  _inherits(VideoRecorder, _Component);\n\n  var _super = _createSuper(VideoRecorder);\n\n  function VideoRecorder() {\n    var _this;\n\n    _classCallCheck(this, VideoRecorder);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"videoInput\", /*#__PURE__*/_react[\"default\"].createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"isComponentUnmounted\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"timeSinceInactivity\", 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"lastRecordingTimestamp\", 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"recordingDuration\", 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      isRecording: false,\n      isCameraOn: false,\n      isConnecting: false,\n      isReplayingVideo: false,\n      isReplayVideoMuted: true,\n      thereWasAnError: false,\n      error: null,\n      streamIsReady: false,\n      isInlineRecordingSupported: null,\n      isVideoInputSupported: null,\n      stream: undefined,\n      currentDeviceId: null,\n      availableDeviceIds: []\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"turnOnCamera\", function () {\n      var deviceId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n      if (_this.props.onTurnOnCamera) {\n        _this.props.onTurnOnCamera();\n      }\n\n      navigator.mediaDevices.enumerateDevices().then(function (mediaDevices) {\n        var videoDevices = mediaDevices.filter(function (x) {\n          return x.kind === 'videoinput';\n        });\n\n        if (deviceId && videoDevices[0] && videoDevices.find(function (x) {\n          return x.deviceId;\n        }) === undefined) {\n          return _this.handleError(new _customErrors.ReactVideoRecorderDeviceUnavailableError());\n        }\n\n        var currentDeviceId = typeof deviceId === 'string' ? deviceId : videoDevices[0].deviceId;\n\n        _this.setState({\n          isConnecting: true,\n          isReplayingVideo: false,\n          thereWasAnError: false,\n          currentDeviceId: currentDeviceId,\n          availableDeviceIds: videoDevices.map(function (x) {\n            return x.deviceId;\n          }),\n          error: null\n        });\n\n        var fallbackContraints = {\n          audio: true,\n          video: true\n        };\n        var currentConstraints = (0, _lodash[\"default\"])({\n          video: {\n            deviceId: {\n              exact: currentDeviceId\n            }\n          }\n        }, _this.props.constraints);\n        navigator.mediaDevices.getUserMedia(currentConstraints)[\"catch\"](function (err) {\n          // there's a bug in chrome in some windows computers where using `ideal` in the constraints throws a NotReadableError\n          if (err.name === 'NotReadableError' || err.name === 'OverconstrainedError') {\n            console.warn(\"Got \".concat(err.name, \", trying getUserMedia again with fallback constraints\"));\n            return navigator.mediaDevices.getUserMedia(fallbackContraints);\n          }\n\n          throw err;\n        }).then(_this.handleSuccess)[\"catch\"](_this.handleError);\n      })[\"catch\"](_this.handleError);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSwitchCamera\", function () {\n      if (_this.props.onSwitchCamera) {\n        _this.props.onSwitchCamera();\n      }\n\n      var _this$state = _this.state,\n          currentDeviceId = _this$state.currentDeviceId,\n          availableDeviceIds = _this$state.availableDeviceIds; // Stop media tracks\n\n      _this.stream && _this.stream.getTracks().forEach(function (stream) {\n        return stream.stop();\n      });\n      var index = availableDeviceIds.findIndex(function (x) {\n        return x === currentDeviceId;\n      });\n      var maxIndex = availableDeviceIds.length - 1;\n\n      if (index < 0) {\n        return _this.handleError(new _customErrors.ReactVideoRecorderDeviceUnavailableError());\n      }\n\n      if (index + 1 > maxIndex) return _this.turnOnCamera(availableDeviceIds[0]);\n      return _this.turnOnCamera(availableDeviceIds[index + 1]);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"turnOffCamera\", function () {\n      if (_this.props.onTurnOffCamera) {\n        _this.props.onTurnOffCamera();\n      }\n\n      _this.stream && _this.stream.getTracks().forEach(function (stream) {\n        return stream.stop();\n      });\n\n      _this.setState({\n        isCameraOn: false\n      });\n\n      clearInterval(_this.inactivityTimer);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSuccess\", function (stream) {\n      // Since handleSuccess is an async function, we may be in a situation where this was called after the\n      // component was unmounted\n      if (_this.isComponentUnmounted) {\n        return;\n      }\n\n      _this.stream = stream;\n\n      _this.setState({\n        isCameraOn: true,\n        stream: stream\n      });\n\n      if (_this.props.onCameraOn) {\n        _this.props.onCameraOn();\n      }\n\n      if (window.URL) {\n        _this.cameraVideo.srcObject = stream;\n      } else {\n        _this.cameraVideo.src = stream;\n      } // there is probably a better way\n      // but this makes sure the start recording button\n      // gives the stream a couple miliseconds to be ready\n\n\n      setTimeout(function () {\n        _this.setState({\n          isConnecting: false,\n          streamIsReady: true\n        });\n      }, 200);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleError\", function (err) {\n      var onError = _this.props.onError;\n\n      if (onError) {\n        onError(err);\n      }\n\n      if (_this.isComponentUnmounted) {\n        return;\n      }\n\n      console.error('Captured error', err);\n      clearTimeout(_this.timeLimitTimeout);\n\n      _this.setState({\n        isConnecting: _this.state.isConnecting && false,\n        isRecording: false,\n        thereWasAnError: true,\n        error: err\n      });\n\n      if (_this.state.isCameraOn) {\n        _this.turnOffCamera();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleDataIssue\", function (event) {\n      var error = new _customErrors.ReactVideoRecorderDataIssueError(event);\n      console.error(error.message, event);\n\n      _this.handleError(error);\n\n      return false;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getMimeType\", function () {\n      if (_this.props.mimeType) {\n        return _this.props.mimeType;\n      }\n\n      var mimeType = window.MediaRecorder.isTypeSupported ? MIME_TYPES.find(window.MediaRecorder.isTypeSupported) : 'video/webm';\n      return _this.mediaRecorder && _this.mediaRecorder.mimeType || mimeType || '';\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isDataHealthOK\", function (event) {\n      if (!event.data) return _this.handleDataIssue(event);\n      var chunkSize = _this.props.chunkSize;\n      var dataCheckInterval = 2000 / chunkSize; // in some browsers (FF/S), data only shows up\n      // after a certain amount of time ~everyt 2 seconds\n\n      var blobCount = _this.recordedBlobs.length;\n\n      if (blobCount > dataCheckInterval && blobCount % dataCheckInterval === 0) {\n        var blob = new window.Blob(_this.recordedBlobs, {\n          type: _this.getMimeType()\n        });\n        if (blob.size <= 0) return _this.handleDataIssue(event);\n      }\n\n      return true;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"tryToUnmuteReplayVideo\", function () {\n      var video = _this.replayVideo;\n      video.muted = false;\n      var playPromise = video.play();\n\n      if (!playPromise) {\n        video.muted = true;\n        return;\n      }\n\n      playPromise.then(function () {\n        _this.setState({\n          isReplayVideoMuted: false\n        }); // fixes bug where seeking control during autoplay is not available until the video is almost completely played through\n\n\n        if (_this.props.replayVideoAutoplayAndLoopOff) {\n          video.pause();\n          video.loop = false;\n        }\n      })[\"catch\"](function (err) {\n        console.warn('Could not autoplay replay video', err);\n        video.muted = true;\n        return video.play();\n      })[\"catch\"](function (err) {\n        console.warn('Could play muted replay video after failed autoplay', err);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleDataAvailable\", function (event) {\n      if (_this.isDataHealthOK(event)) {\n        _this.recordedBlobs.push(event.data);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getTotalEllapsedTimeInMs\", function () {\n      return Date.now() - _this.lastRecordingTimestamp + _this.recordingDuration;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleStopRecording\", function () {\n      if (_this.props.onStopRecording) {\n        _this.props.onStopRecording();\n      }\n\n      if (!_this.mediaRecorder) {\n        _this.handleError(new _customErrors.ReactVideoRecorderMediaRecorderUnavailableError());\n\n        return;\n      }\n\n      _this.mediaRecorder.stop();\n\n      _this.recordingDuration = _this.getTotalEllapsedTimeInMs();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handlePauseRecording\", function () {\n      if (_this.props.onPauseRecording) {\n        _this.props.onPauseRecording();\n      }\n\n      if (!_this.mediaRecorder) {\n        _this.handleError(new _customErrors.ReactVideoRecorderMediaRecorderUnavailableError());\n\n        return;\n      }\n\n      _this.mediaRecorder.pause();\n\n      _this.recordingDuration = _this.getTotalEllapsedTimeInMs();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleResumeRecording\", function () {\n      if (_this.props.onResumeRecording) {\n        _this.props.onResumeRecording();\n      }\n\n      if (!_this.mediaRecorder) {\n        _this.handleError(new _customErrors.ReactVideoRecorderMediaRecorderUnavailableError());\n\n        return;\n      }\n\n      _this.mediaRecorder.resume();\n\n      _this.lastRecordingTimestamp = Date.now();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleStartRecording\", function () {\n      if (_this.props.onStartRecording) {\n        _this.props.onStartRecording();\n      }\n\n      _this.setState({\n        isRunningCountdown: true,\n        isReplayingVideo: false\n      });\n\n      setTimeout(function () {\n        return _this.startRecording();\n      }, _this.props.countdownTime);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"startRecording\", function () {\n      (0, _getVideoInfo.captureThumb)(_this.cameraVideo).then(function (thumbnail) {\n        _this.thumbnail = thumbnail;\n        _this.recordedBlobs = [];\n        var options = {\n          mimeType: _this.getMimeType()\n        };\n\n        try {\n          _this.setState({\n            isRunningCountdown: false,\n            isRecording: true\n          });\n\n          _this.startedAt = new Date().getTime();\n          _this.mediaRecorder = new window.MediaRecorder(_this.stream, options);\n\n          _this.mediaRecorder.addEventListener('stop', _this.handleStop);\n\n          _this.mediaRecorder.addEventListener('error', _this.handleError);\n\n          _this.mediaRecorder.addEventListener('dataavailable', _this.handleDataAvailable);\n\n          var _this$props = _this.props,\n              timeLimit = _this$props.timeLimit,\n              chunkSize = _this$props.chunkSize,\n              dataAvailableTimeout = _this$props.dataAvailableTimeout;\n\n          _this.mediaRecorder.start(chunkSize); // collect 10ms of data\n\n\n          _this.lastRecordingTimestamp = Date.now();\n          _this.recordingDuration = 0;\n\n          if (timeLimit) {\n            _this.timeLimitTimeout = setTimeout(function () {\n              _this.handleStopRecording();\n            }, timeLimit);\n          } // mediaRecorder.ondataavailable should be called every 10ms,\n          // as that's what we're passing to mediaRecorder.start() above\n\n\n          if (Number.isInteger(dataAvailableTimeout)) {\n            setTimeout(function () {\n              if (_this.recordedBlobs.length === 0) {\n                _this.handleError(new _customErrors.ReactVideoRecorderDataAvailableTimeoutError(dataAvailableTimeout));\n              }\n            }, dataAvailableTimeout);\n          }\n        } catch (err) {\n          console.error(\"Couldn't create MediaRecorder\", err, options);\n\n          _this.handleError(err);\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleStop\", function (event) {\n      var endedAt = new Date().getTime();\n\n      if (!_this.recordedBlobs || _this.recordedBlobs.length <= 0) {\n        var error = new _customErrors.ReactVideoRecorderRecordedBlobsUnavailableError(event);\n        console.error(error.message, event);\n\n        _this.handleError(error);\n\n        return;\n      }\n\n      clearTimeout(_this.timeLimitTimeout);\n      var videoBlob = _this.recordedBlobs.length === 1 ? _this.recordedBlobs[0] : new window.Blob(_this.recordedBlobs, {\n        type: _this.getMimeType()\n      });\n      var thumbnailBlob = _this.thumbnail;\n      var startedAt = _this.startedAt;\n      var duration = endedAt - startedAt; // if this gets executed too soon, the last chunk of data is lost on FF\n\n      _this.mediaRecorder.ondataavailable = null;\n\n      _this.fixVideoMetadata(videoBlob).then(function (fixedVideoBlob) {\n        _this.setState({\n          isRecording: false,\n          isReplayingVideo: true,\n          isReplayVideoMuted: true,\n          fixedVideoBlob: fixedVideoBlob,\n          videoUrl: window.URL.createObjectURL(fixedVideoBlob)\n        });\n\n        _this.turnOffCamera();\n\n        _this.props.onRecordingComplete(fixedVideoBlob, startedAt, thumbnailBlob, duration);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"fixVideoMetadata\", function (rawVideoBlob) {\n      var _Blob$prototype, _Blob$prototype$array;\n\n      var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n\n      if (isSafari) {\n        return Promise.resolve(rawVideoBlob);\n      } // see https://stackoverflow.com/a/63568311\n\n\n      (_Blob$prototype$array = (_Blob$prototype = Blob.prototype).arrayBuffer) !== null && _Blob$prototype$array !== void 0 ? _Blob$prototype$array : _Blob$prototype.arrayBuffer = function () {\n        return new Response(this).arrayBuffer();\n      };\n      return (0, _fixWebmDuration[\"default\"])(rawVideoBlob, _this.recordingDuration);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleVideoSelected\", function (e) {\n      if (_this.state.isReplayingVideo) {\n        _this.setState({\n          isReplayingVideo: false\n        });\n      }\n\n      var files = e.target.files || e.dataTransfer.files;\n      if (files.length === 0) return;\n      var startedAt = new Date().getTime();\n      var video = files[0];\n      e.target.value = null;\n      var extension = video.type === 'video/quicktime' ? 'mov' : undefined;\n      (0, _getVideoInfo[\"default\"])(video).then(function (_ref) {\n        var duration = _ref.duration,\n            thumbnail = _ref.thumbnail;\n\n        _this.setState({\n          isRecording: false,\n          isReplayingVideo: true,\n          isReplayVideoMuted: true,\n          videoBlob: video,\n          videoUrl: window.URL.createObjectURL(video)\n        });\n\n        _this.props.onRecordingComplete(video, startedAt, thumbnail, duration, extension);\n      })[\"catch\"](function (err) {\n        _this.handleError(err);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleOpenVideoInput\", function () {\n      if (_this.props.onOpenVideoInput) {\n        _this.props.onOpenVideoInput();\n      }\n\n      _this.videoInput.current.value = null;\n\n      _this.videoInput.current.click(); // fixes a bug on iPhone where it doesn't save the recorded video on the second time (if you press the 'Use another video' button)\n\n\n      _this.videoInput.current.addEventListener('change', _this.handleVideoSelected);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleStopReplaying\", function () {\n      if (_this.props.onStopReplaying) {\n        _this.props.onStopReplaying();\n      }\n\n      if (_this.props.useVideoInput && _this.props.isOnInitially) {\n        return _this.handleOpenVideoInput();\n      }\n\n      _this.setState({\n        isReplayingVideo: false\n      });\n\n      if (_this.state.isInlineRecordingSupported && _this.props.isOnInitially) {\n        _this.turnOnCamera();\n      } else if (_this.state.isVideoInputSupported && _this.props.isOnInitially) {\n        _this.handleOpenVideoInput();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleReplayVideoClick\", function () {\n      if (_this.replayVideo.paused && !_this.props.showReplayControls) {\n        _this.replayVideo.play();\n      } // fixes bug where seeking control during autoplay is not available until the video is almost completely played through\n\n\n      if (!_this.props.replayVideoAutoplayAndLoopOff) {\n        _this.setState({\n          isReplayVideoMuted: !_this.state.isReplayVideoMuted\n        });\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(VideoRecorder, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var isInlineRecordingSupported = !!window.MediaRecorder && !!navigator.mediaDevices;\n      var isVideoInputSupported = document.createElement('input').capture !== undefined;\n      this.setState({\n        isInlineRecordingSupported: isInlineRecordingSupported,\n        isVideoInputSupported: isVideoInputSupported\n      }, function () {\n        if (_this2.props.useVideoInput && _this2.props.isOnInitially) {\n          _this2.handleOpenVideoInput();\n        } else if (_this2.state.isInlineRecordingSupported && _this2.props.isOnInitially) {\n          _this2.turnOnCamera();\n        } else if (_this2.state.isVideoInputSupported && _this2.props.isOnInitially) {\n          _this2.handleOpenVideoInput();\n        }\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (this.replayVideo && this.state.isReplayingVideo && !prevState.isReplayingVideo) {\n        this.tryToUnmuteReplayVideo();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.turnOffCamera();\n      this.isComponentUnmounted = true;\n    }\n  }, {\n    key: \"renderCameraView\",\n    value: function renderCameraView() {\n      var _this3 = this;\n\n      var _this$props2 = this.props,\n          cameraViewClassName = _this$props2.cameraViewClassName,\n          showReplayControls = _this$props2.showReplayControls,\n          videoControlsList = _this$props2.videoControlsList,\n          disablePictureInPicture = _this$props2.disablePictureInPicture,\n          replayVideoAutoplayAndLoopOff = _this$props2.replayVideoAutoplayAndLoopOff,\n          renderDisconnectedView = _this$props2.renderDisconnectedView,\n          renderVideoInputView = _this$props2.renderVideoInputView,\n          renderUnsupportedView = _this$props2.renderUnsupportedView,\n          renderErrorView = _this$props2.renderErrorView,\n          renderLoadingView = _this$props2.renderLoadingView,\n          useVideoInput = _this$props2.useVideoInput,\n          videoClassName = _this$props2.videoClassName;\n      var _this$state2 = this.state,\n          isVideoInputSupported = _this$state2.isVideoInputSupported,\n          isReplayingVideo = _this$state2.isReplayingVideo,\n          isInlineRecordingSupported = _this$state2.isInlineRecordingSupported,\n          thereWasAnError = _this$state2.thereWasAnError,\n          error = _this$state2.error,\n          isCameraOn = _this$state2.isCameraOn,\n          isConnecting = _this$state2.isConnecting,\n          isReplayVideoMuted = _this$state2.isReplayVideoMuted,\n          isRecording = _this$state2.isRecording,\n          availableDeviceIds = _this$state2.availableDeviceIds;\n      var shouldUseVideoInput = useVideoInput || !isInlineRecordingSupported && isVideoInputSupported;\n      var videoInput = shouldUseVideoInput ? /*#__PURE__*/_react[\"default\"].createElement(\"input\", {\n        ref: this.videoInput,\n        key: \"videoInput\",\n        type: \"file\",\n        accept: \"video/*\",\n        capture: useVideoInput ? undefined : 'user',\n        style: {\n          display: 'none'\n        },\n        onChange: this.handleVideoSelected\n      }) : null;\n\n      if (isReplayingVideo) {\n        return /*#__PURE__*/_react[\"default\"].createElement(CameraView, {\n          key: \"replay\",\n          className: cameraViewClassName\n        }, /*#__PURE__*/_react[\"default\"].createElement(Video, {\n          ref: function ref(el) {\n            return _this3.replayVideo = el;\n          },\n          className: videoClassName,\n          src: this.state.videoUrl,\n          loop: true,\n          muted: isReplayVideoMuted,\n          playsInline: true,\n          autoPlay: !replayVideoAutoplayAndLoopOff,\n          controls: showReplayControls,\n          onClick: this.handleReplayVideoClick,\n          onDurationChange: this.handleDurationChange,\n          controlsList: videoControlsList,\n          disablePictureInPicture: disablePictureInPicture\n        }), videoInput);\n      }\n\n      if (shouldUseVideoInput) {\n        return renderVideoInputView({\n          videoInput: videoInput\n        });\n      }\n\n      if (!isInlineRecordingSupported) {\n        return renderUnsupportedView();\n      }\n\n      if (thereWasAnError) {\n        return renderErrorView({\n          error: error\n        });\n      }\n\n      if (isCameraOn) {\n        // Enable switch camera button, only if not recording and multiple video sources available\n        var switchCameraControl = availableDeviceIds && availableDeviceIds.length >= 2 && !isRecording ? /*#__PURE__*/_react[\"default\"].createElement(_switchCameraView[\"default\"], {\n          onClick: this.handleSwitchCamera\n        }) : null;\n        return /*#__PURE__*/_react[\"default\"].createElement(CameraView, {\n          key: \"camera\"\n        }, /*#__PURE__*/_react[\"default\"].createElement(Video, {\n          isFlipped: this.props.isFlipped,\n          ref: function ref(el) {\n            return _this3.cameraVideo = el;\n          },\n          autoPlay: true,\n          muted: true,\n          playsInline: true\n        }), switchCameraControl);\n      }\n\n      if (isConnecting) {\n        return renderLoadingView();\n      }\n\n      return renderDisconnectedView();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$state3 = this.state,\n          isVideoInputSupported = _this$state3.isVideoInputSupported,\n          isInlineRecordingSupported = _this$state3.isInlineRecordingSupported,\n          thereWasAnError = _this$state3.thereWasAnError,\n          isRecording = _this$state3.isRecording,\n          isCameraOn = _this$state3.isCameraOn,\n          streamIsReady = _this$state3.streamIsReady,\n          isConnecting = _this$state3.isConnecting,\n          isRunningCountdown = _this$state3.isRunningCountdown,\n          isReplayingVideo = _this$state3.isReplayingVideo,\n          isReplayVideoMuted = _this$state3.isReplayVideoMuted;\n      var _this$props3 = this.props,\n          countdownTime = _this$props3.countdownTime,\n          timeLimit = _this$props3.timeLimit,\n          showReplayControls = _this$props3.showReplayControls,\n          replayVideoAutoplayAndLoopOff = _this$props3.replayVideoAutoplayAndLoopOff,\n          renderActions = _this$props3.renderActions,\n          t = _this$props3.t,\n          useVideoInput = _this$props3.useVideoInput,\n          wrapperClassName = _this$props3.wrapperClassName;\n      return /*#__PURE__*/_react[\"default\"].createElement(Wrapper, {\n        className: wrapperClassName\n      }, this.renderCameraView(), renderActions({\n        t: t,\n        isVideoInputSupported: isVideoInputSupported,\n        isInlineRecordingSupported: isInlineRecordingSupported,\n        thereWasAnError: thereWasAnError,\n        isRecording: isRecording,\n        isCameraOn: isCameraOn,\n        streamIsReady: streamIsReady,\n        isConnecting: isConnecting,\n        isRunningCountdown: isRunningCountdown,\n        isReplayingVideo: isReplayingVideo,\n        isReplayVideoMuted: isReplayVideoMuted,\n        countdownTime: countdownTime,\n        timeLimit: timeLimit,\n        showReplayControls: showReplayControls,\n        replayVideoAutoplayAndLoopOff: replayVideoAutoplayAndLoopOff,\n        useVideoInput: useVideoInput,\n        onTurnOnCamera: function onTurnOnCamera() {\n          return _this4.turnOnCamera();\n        },\n        onSwitchCamera: this.handleSwitchCamera,\n        onTurnOffCamera: this.turnOffCamera,\n        onOpenVideoInput: this.handleOpenVideoInput,\n        onStartRecording: this.handleStartRecording,\n        onStopRecording: this.handleStopRecording,\n        onPauseRecording: this.handlePauseRecording,\n        onResumeRecording: this.handleResumeRecording,\n        onStopReplaying: this.handleStopReplaying\n      }));\n    }\n  }]);\n\n  return VideoRecorder;\n}(_react.Component);\n\nexports[\"default\"] = VideoRecorder;\n\n_defineProperty(VideoRecorder, \"propTypes\", {\n  /** Whether or not to start the camera initially */\n  isOnInitially: _propTypes[\"default\"].bool,\n\n  /** Whether or not to display the video flipped (makes sense for user facing camera) */\n  isFlipped: _propTypes[\"default\"].bool,\n\n  /** Pass this if you want to force a specific mime-type for the video */\n  mimeType: _propTypes[\"default\"].string,\n\n  /** How much time to wait until it starts recording (in ms) */\n  countdownTime: _propTypes[\"default\"].number,\n\n  /** Use this if you want to set a time limit for the video (in ms) */\n  timeLimit: _propTypes[\"default\"].number,\n\n  /** Use this if you want to show play/pause/etc. controls on the replay video */\n  showReplayControls: _propTypes[\"default\"].bool,\n\n  /** Use this to turn off autoplay and looping of the replay video. It is recommended to also showReplayControls in order to play */\n  replayVideoAutoplayAndLoopOff: _propTypes[\"default\"].bool,\n\n  /** Use this if you want to customize the constraints passed to getUserMedia() */\n  constraints: _propTypes[\"default\"].shape({\n    audio: _propTypes[\"default\"].any,\n    video: _propTypes[\"default\"].any\n  }),\n  chunkSize: _propTypes[\"default\"].number,\n  dataAvailableTimeout: _propTypes[\"default\"].number,\n  useVideoInput: _propTypes[\"default\"].bool,\n\n  /** Use this to configure the replaying video element's controlslist attribute */\n  videoControlsList: _propTypes[\"default\"].string,\n\n  /** Use this to disable picture in picture mode on the replaying video element */\n  disablePictureInPicture: _propTypes[\"default\"].bool,\n  renderDisconnectedView: _propTypes[\"default\"].func,\n  renderLoadingView: _propTypes[\"default\"].func,\n  renderVideoInputView: _propTypes[\"default\"].func,\n  renderUnsupportedView: _propTypes[\"default\"].func,\n  renderErrorView: _propTypes[\"default\"].func,\n  renderActions: _propTypes[\"default\"].func,\n  cameraViewClassName: _propTypes[\"default\"].string,\n  videoClassName: _propTypes[\"default\"].string,\n  wrapperClassName: _propTypes[\"default\"].string,\n\n  /** Use this to localize the texts */\n  t: _propTypes[\"default\"].func,\n  onCameraOn: _propTypes[\"default\"].func,\n  onTurnOnCamera: _propTypes[\"default\"].func,\n  onSwitchCamera: _propTypes[\"default\"].func,\n  onTurnOffCamera: _propTypes[\"default\"].func,\n  onStartRecording: _propTypes[\"default\"].func,\n  onStopRecording: _propTypes[\"default\"].func,\n  onPauseRecording: _propTypes[\"default\"].func,\n  onResumeRecording: _propTypes[\"default\"].func,\n  onRecordingComplete: _propTypes[\"default\"].func,\n  onOpenVideoInput: _propTypes[\"default\"].func,\n  onStopReplaying: _propTypes[\"default\"].func,\n  onError: _propTypes[\"default\"].func\n});\n\n_defineProperty(VideoRecorder, \"defaultProps\", {\n  renderUnsupportedView: function renderUnsupportedView() {\n    return /*#__PURE__*/_react[\"default\"].createElement(_unsupportedView[\"default\"], null);\n  },\n  renderErrorView: function renderErrorView() {\n    return /*#__PURE__*/_react[\"default\"].createElement(_errorView[\"default\"], null);\n  },\n  renderVideoInputView: function renderVideoInputView(_ref2) {\n    var videoInput = _ref2.videoInput;\n    return /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, videoInput);\n  },\n  renderDisconnectedView: function renderDisconnectedView() {\n    return /*#__PURE__*/_react[\"default\"].createElement(_disconnectedView[\"default\"], null);\n  },\n  renderLoadingView: function renderLoadingView() {\n    return /*#__PURE__*/_react[\"default\"].createElement(_loadingView[\"default\"], null);\n  },\n  t: function t(x) {\n    return x;\n  },\n  renderActions: _renderActions[\"default\"],\n  isFlipped: true,\n  countdownTime: 3000,\n  constraints: CONSTRAINTS,\n  chunkSize: 250,\n  dataAvailableTimeout: 500\n});","map":{"version":3,"names":["Object","defineProperty","exports","value","_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_lodash","_styledComponents","_fixWebmDuration","_unsupportedView","_errorView","_disconnectedView","_loadingView","_switchCameraView","_renderActions","_getVideoInfo","_customErrors","obj","__esModule","_getRequireWildcardCache","WeakMap","cache","_typeof","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","Symbol","iterator","constructor","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","_createClass","protoProps","staticProps","_inherits","subClass","superClass","create","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","arguments","apply","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Date","toString","e","getPrototypeOf","_defineProperty","MIME_TYPES","CONSTRAINTS","audio","video","Wrapper","div","withConfig","displayName","componentId","CameraView","Video","isFlipped","css","onClick","VideoRecorder","_Component","_super","_this","_len","args","Array","_key","concat","createRef","isRecording","isCameraOn","isConnecting","isReplayingVideo","isReplayVideoMuted","thereWasAnError","error","streamIsReady","isInlineRecordingSupported","isVideoInputSupported","stream","undefined","currentDeviceId","availableDeviceIds","deviceId","onTurnOnCamera","navigator","mediaDevices","enumerateDevices","then","videoDevices","filter","x","kind","find","handleError","ReactVideoRecorderDeviceUnavailableError","setState","map","fallbackContraints","currentConstraints","exact","constraints","getUserMedia","err","name","console","warn","handleSuccess","onSwitchCamera","_this$state","state","getTracks","forEach","stop","index","findIndex","maxIndex","turnOnCamera","onTurnOffCamera","clearInterval","inactivityTimer","isComponentUnmounted","onCameraOn","window","URL","cameraVideo","srcObject","src","setTimeout","onError","clearTimeout","timeLimitTimeout","turnOffCamera","event","ReactVideoRecorderDataIssueError","message","mimeType","MediaRecorder","isTypeSupported","mediaRecorder","data","handleDataIssue","chunkSize","dataCheckInterval","blobCount","recordedBlobs","blob","Blob","type","getMimeType","size","replayVideo","muted","playPromise","play","replayVideoAutoplayAndLoopOff","pause","loop","isDataHealthOK","push","now","lastRecordingTimestamp","recordingDuration","onStopRecording","ReactVideoRecorderMediaRecorderUnavailableError","getTotalEllapsedTimeInMs","onPauseRecording","onResumeRecording","resume","onStartRecording","isRunningCountdown","startRecording","countdownTime","captureThumb","thumbnail","options","startedAt","getTime","addEventListener","handleStop","handleDataAvailable","_this$props","timeLimit","dataAvailableTimeout","start","handleStopRecording","Number","isInteger","ReactVideoRecorderDataAvailableTimeoutError","endedAt","ReactVideoRecorderRecordedBlobsUnavailableError","videoBlob","thumbnailBlob","duration","ondataavailable","fixVideoMetadata","fixedVideoBlob","videoUrl","createObjectURL","onRecordingComplete","rawVideoBlob","_Blob$prototype","_Blob$prototype$array","isSafari","test","userAgent","Promise","resolve","arrayBuffer","Response","files","dataTransfer","extension","_ref","onOpenVideoInput","videoInput","current","click","handleVideoSelected","onStopReplaying","useVideoInput","isOnInitially","handleOpenVideoInput","paused","showReplayControls","componentDidMount","_this2","document","createElement","capture","componentDidUpdate","prevProps","prevState","tryToUnmuteReplayVideo","componentWillUnmount","renderCameraView","_this3","_this$props2","cameraViewClassName","videoControlsList","disablePictureInPicture","renderDisconnectedView","renderVideoInputView","renderUnsupportedView","renderErrorView","renderLoadingView","videoClassName","_this$state2","shouldUseVideoInput","ref","accept","style","display","onChange","className","el","playsInline","autoPlay","controls","handleReplayVideoClick","onDurationChange","handleDurationChange","controlsList","switchCameraControl","handleSwitchCamera","render","_this4","_this$state3","_this$props3","renderActions","t","wrapperClassName","handleStartRecording","handlePauseRecording","handleResumeRecording","handleStopReplaying","Component","bool","string","number","shape","any","func","_ref2","Fragment"],"sources":["/Users/so._.may._.see._.macy/tpat/node_modules/react-video-recorder/lib/video-recorder.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _lodash = _interopRequireDefault(require(\"lodash.merge\"));\n\nvar _styledComponents = _interopRequireWildcard(require(\"styled-components\"));\n\nvar _fixWebmDuration = _interopRequireDefault(require(\"fix-webm-duration\"));\n\nvar _unsupportedView = _interopRequireDefault(require(\"./defaults/unsupported-view\"));\n\nvar _errorView = _interopRequireDefault(require(\"./defaults/error-view\"));\n\nvar _disconnectedView = _interopRequireDefault(require(\"./defaults/disconnected-view\"));\n\nvar _loadingView = _interopRequireDefault(require(\"./defaults/loading-view\"));\n\nvar _switchCameraView = _interopRequireDefault(require(\"./defaults/switch-camera-view\"));\n\nvar _renderActions = _interopRequireDefault(require(\"./defaults/render-actions\"));\n\nvar _getVideoInfo = _interopRequireWildcard(require(\"./get-video-info\"));\n\nvar _customErrors = require(\"./custom-errors\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar MIME_TYPES = ['video/webm;codecs=\"vp8,opus\"', 'video/webm;codecs=h264', 'video/webm;codecs=vp9', 'video/webm', 'video/mp4'];\nvar CONSTRAINTS = {\n  audio: true,\n  video: true\n};\n\nvar Wrapper = _styledComponents[\"default\"].div.withConfig({\n  displayName: \"video-recorder__Wrapper\",\n  componentId: \"sc-7k20rv-0\"\n})([\"position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%;overflow:hidden;min-height:300px;background-color:#000;color:white;box-sizing:border-box;*{box-sizing:inherit;}\"]);\n\nvar CameraView = _styledComponents[\"default\"].div.withConfig({\n  displayName: \"video-recorder__CameraView\",\n  componentId: \"sc-7k20rv-1\"\n})([\"width:100%;height:100%;\"]);\n\nvar Video = _styledComponents[\"default\"].video.withConfig({\n  displayName: \"video-recorder__Video\",\n  componentId: \"sc-7k20rv-2\"\n})([\"position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);min-height:100%;min-width:100%;width:100%;height:100%;object-fit:cover;\", \";\", \";\"], function (props) {\n  return props.isFlipped && (0, _styledComponents.css)([\"transform:translate(-50%,-50%) scaleX(-1);\"]);\n}, function (props) {\n  return props.onClick && (0, _styledComponents.css)([\"cursor:pointer;\"]);\n});\n\nvar VideoRecorder = /*#__PURE__*/function (_Component) {\n  _inherits(VideoRecorder, _Component);\n\n  var _super = _createSuper(VideoRecorder);\n\n  function VideoRecorder() {\n    var _this;\n\n    _classCallCheck(this, VideoRecorder);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"videoInput\", /*#__PURE__*/_react[\"default\"].createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"isComponentUnmounted\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"timeSinceInactivity\", 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"lastRecordingTimestamp\", 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"recordingDuration\", 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      isRecording: false,\n      isCameraOn: false,\n      isConnecting: false,\n      isReplayingVideo: false,\n      isReplayVideoMuted: true,\n      thereWasAnError: false,\n      error: null,\n      streamIsReady: false,\n      isInlineRecordingSupported: null,\n      isVideoInputSupported: null,\n      stream: undefined,\n      currentDeviceId: null,\n      availableDeviceIds: []\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"turnOnCamera\", function () {\n      var deviceId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n      if (_this.props.onTurnOnCamera) {\n        _this.props.onTurnOnCamera();\n      }\n\n      navigator.mediaDevices.enumerateDevices().then(function (mediaDevices) {\n        var videoDevices = mediaDevices.filter(function (x) {\n          return x.kind === 'videoinput';\n        });\n\n        if (deviceId && videoDevices[0] && videoDevices.find(function (x) {\n          return x.deviceId;\n        }) === undefined) {\n          return _this.handleError(new _customErrors.ReactVideoRecorderDeviceUnavailableError());\n        }\n\n        var currentDeviceId = typeof deviceId === 'string' ? deviceId : videoDevices[0].deviceId;\n\n        _this.setState({\n          isConnecting: true,\n          isReplayingVideo: false,\n          thereWasAnError: false,\n          currentDeviceId: currentDeviceId,\n          availableDeviceIds: videoDevices.map(function (x) {\n            return x.deviceId;\n          }),\n          error: null\n        });\n\n        var fallbackContraints = {\n          audio: true,\n          video: true\n        };\n        var currentConstraints = (0, _lodash[\"default\"])({\n          video: {\n            deviceId: {\n              exact: currentDeviceId\n            }\n          }\n        }, _this.props.constraints);\n        navigator.mediaDevices.getUserMedia(currentConstraints)[\"catch\"](function (err) {\n          // there's a bug in chrome in some windows computers where using `ideal` in the constraints throws a NotReadableError\n          if (err.name === 'NotReadableError' || err.name === 'OverconstrainedError') {\n            console.warn(\"Got \".concat(err.name, \", trying getUserMedia again with fallback constraints\"));\n            return navigator.mediaDevices.getUserMedia(fallbackContraints);\n          }\n\n          throw err;\n        }).then(_this.handleSuccess)[\"catch\"](_this.handleError);\n      })[\"catch\"](_this.handleError);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSwitchCamera\", function () {\n      if (_this.props.onSwitchCamera) {\n        _this.props.onSwitchCamera();\n      }\n\n      var _this$state = _this.state,\n          currentDeviceId = _this$state.currentDeviceId,\n          availableDeviceIds = _this$state.availableDeviceIds; // Stop media tracks\n\n      _this.stream && _this.stream.getTracks().forEach(function (stream) {\n        return stream.stop();\n      });\n      var index = availableDeviceIds.findIndex(function (x) {\n        return x === currentDeviceId;\n      });\n      var maxIndex = availableDeviceIds.length - 1;\n\n      if (index < 0) {\n        return _this.handleError(new _customErrors.ReactVideoRecorderDeviceUnavailableError());\n      }\n\n      if (index + 1 > maxIndex) return _this.turnOnCamera(availableDeviceIds[0]);\n      return _this.turnOnCamera(availableDeviceIds[index + 1]);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"turnOffCamera\", function () {\n      if (_this.props.onTurnOffCamera) {\n        _this.props.onTurnOffCamera();\n      }\n\n      _this.stream && _this.stream.getTracks().forEach(function (stream) {\n        return stream.stop();\n      });\n\n      _this.setState({\n        isCameraOn: false\n      });\n\n      clearInterval(_this.inactivityTimer);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSuccess\", function (stream) {\n      // Since handleSuccess is an async function, we may be in a situation where this was called after the\n      // component was unmounted\n      if (_this.isComponentUnmounted) {\n        return;\n      }\n\n      _this.stream = stream;\n\n      _this.setState({\n        isCameraOn: true,\n        stream: stream\n      });\n\n      if (_this.props.onCameraOn) {\n        _this.props.onCameraOn();\n      }\n\n      if (window.URL) {\n        _this.cameraVideo.srcObject = stream;\n      } else {\n        _this.cameraVideo.src = stream;\n      } // there is probably a better way\n      // but this makes sure the start recording button\n      // gives the stream a couple miliseconds to be ready\n\n\n      setTimeout(function () {\n        _this.setState({\n          isConnecting: false,\n          streamIsReady: true\n        });\n      }, 200);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleError\", function (err) {\n      var onError = _this.props.onError;\n\n      if (onError) {\n        onError(err);\n      }\n\n      if (_this.isComponentUnmounted) {\n        return;\n      }\n\n      console.error('Captured error', err);\n      clearTimeout(_this.timeLimitTimeout);\n\n      _this.setState({\n        isConnecting: _this.state.isConnecting && false,\n        isRecording: false,\n        thereWasAnError: true,\n        error: err\n      });\n\n      if (_this.state.isCameraOn) {\n        _this.turnOffCamera();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleDataIssue\", function (event) {\n      var error = new _customErrors.ReactVideoRecorderDataIssueError(event);\n      console.error(error.message, event);\n\n      _this.handleError(error);\n\n      return false;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getMimeType\", function () {\n      if (_this.props.mimeType) {\n        return _this.props.mimeType;\n      }\n\n      var mimeType = window.MediaRecorder.isTypeSupported ? MIME_TYPES.find(window.MediaRecorder.isTypeSupported) : 'video/webm';\n      return _this.mediaRecorder && _this.mediaRecorder.mimeType || mimeType || '';\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isDataHealthOK\", function (event) {\n      if (!event.data) return _this.handleDataIssue(event);\n      var chunkSize = _this.props.chunkSize;\n      var dataCheckInterval = 2000 / chunkSize; // in some browsers (FF/S), data only shows up\n      // after a certain amount of time ~everyt 2 seconds\n\n      var blobCount = _this.recordedBlobs.length;\n\n      if (blobCount > dataCheckInterval && blobCount % dataCheckInterval === 0) {\n        var blob = new window.Blob(_this.recordedBlobs, {\n          type: _this.getMimeType()\n        });\n        if (blob.size <= 0) return _this.handleDataIssue(event);\n      }\n\n      return true;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"tryToUnmuteReplayVideo\", function () {\n      var video = _this.replayVideo;\n      video.muted = false;\n      var playPromise = video.play();\n\n      if (!playPromise) {\n        video.muted = true;\n        return;\n      }\n\n      playPromise.then(function () {\n        _this.setState({\n          isReplayVideoMuted: false\n        }); // fixes bug where seeking control during autoplay is not available until the video is almost completely played through\n\n\n        if (_this.props.replayVideoAutoplayAndLoopOff) {\n          video.pause();\n          video.loop = false;\n        }\n      })[\"catch\"](function (err) {\n        console.warn('Could not autoplay replay video', err);\n        video.muted = true;\n        return video.play();\n      })[\"catch\"](function (err) {\n        console.warn('Could play muted replay video after failed autoplay', err);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleDataAvailable\", function (event) {\n      if (_this.isDataHealthOK(event)) {\n        _this.recordedBlobs.push(event.data);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getTotalEllapsedTimeInMs\", function () {\n      return Date.now() - _this.lastRecordingTimestamp + _this.recordingDuration;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleStopRecording\", function () {\n      if (_this.props.onStopRecording) {\n        _this.props.onStopRecording();\n      }\n\n      if (!_this.mediaRecorder) {\n        _this.handleError(new _customErrors.ReactVideoRecorderMediaRecorderUnavailableError());\n\n        return;\n      }\n\n      _this.mediaRecorder.stop();\n\n      _this.recordingDuration = _this.getTotalEllapsedTimeInMs();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handlePauseRecording\", function () {\n      if (_this.props.onPauseRecording) {\n        _this.props.onPauseRecording();\n      }\n\n      if (!_this.mediaRecorder) {\n        _this.handleError(new _customErrors.ReactVideoRecorderMediaRecorderUnavailableError());\n\n        return;\n      }\n\n      _this.mediaRecorder.pause();\n\n      _this.recordingDuration = _this.getTotalEllapsedTimeInMs();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleResumeRecording\", function () {\n      if (_this.props.onResumeRecording) {\n        _this.props.onResumeRecording();\n      }\n\n      if (!_this.mediaRecorder) {\n        _this.handleError(new _customErrors.ReactVideoRecorderMediaRecorderUnavailableError());\n\n        return;\n      }\n\n      _this.mediaRecorder.resume();\n\n      _this.lastRecordingTimestamp = Date.now();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleStartRecording\", function () {\n      if (_this.props.onStartRecording) {\n        _this.props.onStartRecording();\n      }\n\n      _this.setState({\n        isRunningCountdown: true,\n        isReplayingVideo: false\n      });\n\n      setTimeout(function () {\n        return _this.startRecording();\n      }, _this.props.countdownTime);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"startRecording\", function () {\n      (0, _getVideoInfo.captureThumb)(_this.cameraVideo).then(function (thumbnail) {\n        _this.thumbnail = thumbnail;\n        _this.recordedBlobs = [];\n        var options = {\n          mimeType: _this.getMimeType()\n        };\n\n        try {\n          _this.setState({\n            isRunningCountdown: false,\n            isRecording: true\n          });\n\n          _this.startedAt = new Date().getTime();\n          _this.mediaRecorder = new window.MediaRecorder(_this.stream, options);\n\n          _this.mediaRecorder.addEventListener('stop', _this.handleStop);\n\n          _this.mediaRecorder.addEventListener('error', _this.handleError);\n\n          _this.mediaRecorder.addEventListener('dataavailable', _this.handleDataAvailable);\n\n          var _this$props = _this.props,\n              timeLimit = _this$props.timeLimit,\n              chunkSize = _this$props.chunkSize,\n              dataAvailableTimeout = _this$props.dataAvailableTimeout;\n\n          _this.mediaRecorder.start(chunkSize); // collect 10ms of data\n\n\n          _this.lastRecordingTimestamp = Date.now();\n          _this.recordingDuration = 0;\n\n          if (timeLimit) {\n            _this.timeLimitTimeout = setTimeout(function () {\n              _this.handleStopRecording();\n            }, timeLimit);\n          } // mediaRecorder.ondataavailable should be called every 10ms,\n          // as that's what we're passing to mediaRecorder.start() above\n\n\n          if (Number.isInteger(dataAvailableTimeout)) {\n            setTimeout(function () {\n              if (_this.recordedBlobs.length === 0) {\n                _this.handleError(new _customErrors.ReactVideoRecorderDataAvailableTimeoutError(dataAvailableTimeout));\n              }\n            }, dataAvailableTimeout);\n          }\n        } catch (err) {\n          console.error(\"Couldn't create MediaRecorder\", err, options);\n\n          _this.handleError(err);\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleStop\", function (event) {\n      var endedAt = new Date().getTime();\n\n      if (!_this.recordedBlobs || _this.recordedBlobs.length <= 0) {\n        var error = new _customErrors.ReactVideoRecorderRecordedBlobsUnavailableError(event);\n        console.error(error.message, event);\n\n        _this.handleError(error);\n\n        return;\n      }\n\n      clearTimeout(_this.timeLimitTimeout);\n      var videoBlob = _this.recordedBlobs.length === 1 ? _this.recordedBlobs[0] : new window.Blob(_this.recordedBlobs, {\n        type: _this.getMimeType()\n      });\n      var thumbnailBlob = _this.thumbnail;\n      var startedAt = _this.startedAt;\n      var duration = endedAt - startedAt; // if this gets executed too soon, the last chunk of data is lost on FF\n\n      _this.mediaRecorder.ondataavailable = null;\n\n      _this.fixVideoMetadata(videoBlob).then(function (fixedVideoBlob) {\n        _this.setState({\n          isRecording: false,\n          isReplayingVideo: true,\n          isReplayVideoMuted: true,\n          fixedVideoBlob: fixedVideoBlob,\n          videoUrl: window.URL.createObjectURL(fixedVideoBlob)\n        });\n\n        _this.turnOffCamera();\n\n        _this.props.onRecordingComplete(fixedVideoBlob, startedAt, thumbnailBlob, duration);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"fixVideoMetadata\", function (rawVideoBlob) {\n      var _Blob$prototype, _Blob$prototype$array;\n\n      var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n\n      if (isSafari) {\n        return Promise.resolve(rawVideoBlob);\n      } // see https://stackoverflow.com/a/63568311\n\n\n      (_Blob$prototype$array = (_Blob$prototype = Blob.prototype).arrayBuffer) !== null && _Blob$prototype$array !== void 0 ? _Blob$prototype$array : _Blob$prototype.arrayBuffer = function () {\n        return new Response(this).arrayBuffer();\n      };\n      return (0, _fixWebmDuration[\"default\"])(rawVideoBlob, _this.recordingDuration);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleVideoSelected\", function (e) {\n      if (_this.state.isReplayingVideo) {\n        _this.setState({\n          isReplayingVideo: false\n        });\n      }\n\n      var files = e.target.files || e.dataTransfer.files;\n      if (files.length === 0) return;\n      var startedAt = new Date().getTime();\n      var video = files[0];\n      e.target.value = null;\n      var extension = video.type === 'video/quicktime' ? 'mov' : undefined;\n      (0, _getVideoInfo[\"default\"])(video).then(function (_ref) {\n        var duration = _ref.duration,\n            thumbnail = _ref.thumbnail;\n\n        _this.setState({\n          isRecording: false,\n          isReplayingVideo: true,\n          isReplayVideoMuted: true,\n          videoBlob: video,\n          videoUrl: window.URL.createObjectURL(video)\n        });\n\n        _this.props.onRecordingComplete(video, startedAt, thumbnail, duration, extension);\n      })[\"catch\"](function (err) {\n        _this.handleError(err);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleOpenVideoInput\", function () {\n      if (_this.props.onOpenVideoInput) {\n        _this.props.onOpenVideoInput();\n      }\n\n      _this.videoInput.current.value = null;\n\n      _this.videoInput.current.click(); // fixes a bug on iPhone where it doesn't save the recorded video on the second time (if you press the 'Use another video' button)\n\n\n      _this.videoInput.current.addEventListener('change', _this.handleVideoSelected);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleStopReplaying\", function () {\n      if (_this.props.onStopReplaying) {\n        _this.props.onStopReplaying();\n      }\n\n      if (_this.props.useVideoInput && _this.props.isOnInitially) {\n        return _this.handleOpenVideoInput();\n      }\n\n      _this.setState({\n        isReplayingVideo: false\n      });\n\n      if (_this.state.isInlineRecordingSupported && _this.props.isOnInitially) {\n        _this.turnOnCamera();\n      } else if (_this.state.isVideoInputSupported && _this.props.isOnInitially) {\n        _this.handleOpenVideoInput();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleReplayVideoClick\", function () {\n      if (_this.replayVideo.paused && !_this.props.showReplayControls) {\n        _this.replayVideo.play();\n      } // fixes bug where seeking control during autoplay is not available until the video is almost completely played through\n\n\n      if (!_this.props.replayVideoAutoplayAndLoopOff) {\n        _this.setState({\n          isReplayVideoMuted: !_this.state.isReplayVideoMuted\n        });\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(VideoRecorder, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var isInlineRecordingSupported = !!window.MediaRecorder && !!navigator.mediaDevices;\n      var isVideoInputSupported = document.createElement('input').capture !== undefined;\n      this.setState({\n        isInlineRecordingSupported: isInlineRecordingSupported,\n        isVideoInputSupported: isVideoInputSupported\n      }, function () {\n        if (_this2.props.useVideoInput && _this2.props.isOnInitially) {\n          _this2.handleOpenVideoInput();\n        } else if (_this2.state.isInlineRecordingSupported && _this2.props.isOnInitially) {\n          _this2.turnOnCamera();\n        } else if (_this2.state.isVideoInputSupported && _this2.props.isOnInitially) {\n          _this2.handleOpenVideoInput();\n        }\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (this.replayVideo && this.state.isReplayingVideo && !prevState.isReplayingVideo) {\n        this.tryToUnmuteReplayVideo();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.turnOffCamera();\n      this.isComponentUnmounted = true;\n    }\n  }, {\n    key: \"renderCameraView\",\n    value: function renderCameraView() {\n      var _this3 = this;\n\n      var _this$props2 = this.props,\n          cameraViewClassName = _this$props2.cameraViewClassName,\n          showReplayControls = _this$props2.showReplayControls,\n          videoControlsList = _this$props2.videoControlsList,\n          disablePictureInPicture = _this$props2.disablePictureInPicture,\n          replayVideoAutoplayAndLoopOff = _this$props2.replayVideoAutoplayAndLoopOff,\n          renderDisconnectedView = _this$props2.renderDisconnectedView,\n          renderVideoInputView = _this$props2.renderVideoInputView,\n          renderUnsupportedView = _this$props2.renderUnsupportedView,\n          renderErrorView = _this$props2.renderErrorView,\n          renderLoadingView = _this$props2.renderLoadingView,\n          useVideoInput = _this$props2.useVideoInput,\n          videoClassName = _this$props2.videoClassName;\n      var _this$state2 = this.state,\n          isVideoInputSupported = _this$state2.isVideoInputSupported,\n          isReplayingVideo = _this$state2.isReplayingVideo,\n          isInlineRecordingSupported = _this$state2.isInlineRecordingSupported,\n          thereWasAnError = _this$state2.thereWasAnError,\n          error = _this$state2.error,\n          isCameraOn = _this$state2.isCameraOn,\n          isConnecting = _this$state2.isConnecting,\n          isReplayVideoMuted = _this$state2.isReplayVideoMuted,\n          isRecording = _this$state2.isRecording,\n          availableDeviceIds = _this$state2.availableDeviceIds;\n      var shouldUseVideoInput = useVideoInput || !isInlineRecordingSupported && isVideoInputSupported;\n      var videoInput = shouldUseVideoInput ? /*#__PURE__*/_react[\"default\"].createElement(\"input\", {\n        ref: this.videoInput,\n        key: \"videoInput\",\n        type: \"file\",\n        accept: \"video/*\",\n        capture: useVideoInput ? undefined : 'user',\n        style: {\n          display: 'none'\n        },\n        onChange: this.handleVideoSelected\n      }) : null;\n\n      if (isReplayingVideo) {\n        return /*#__PURE__*/_react[\"default\"].createElement(CameraView, {\n          key: \"replay\",\n          className: cameraViewClassName\n        }, /*#__PURE__*/_react[\"default\"].createElement(Video, {\n          ref: function ref(el) {\n            return _this3.replayVideo = el;\n          },\n          className: videoClassName,\n          src: this.state.videoUrl,\n          loop: true,\n          muted: isReplayVideoMuted,\n          playsInline: true,\n          autoPlay: !replayVideoAutoplayAndLoopOff,\n          controls: showReplayControls,\n          onClick: this.handleReplayVideoClick,\n          onDurationChange: this.handleDurationChange,\n          controlsList: videoControlsList,\n          disablePictureInPicture: disablePictureInPicture\n        }), videoInput);\n      }\n\n      if (shouldUseVideoInput) {\n        return renderVideoInputView({\n          videoInput: videoInput\n        });\n      }\n\n      if (!isInlineRecordingSupported) {\n        return renderUnsupportedView();\n      }\n\n      if (thereWasAnError) {\n        return renderErrorView({\n          error: error\n        });\n      }\n\n      if (isCameraOn) {\n        // Enable switch camera button, only if not recording and multiple video sources available\n        var switchCameraControl = availableDeviceIds && availableDeviceIds.length >= 2 && !isRecording ? /*#__PURE__*/_react[\"default\"].createElement(_switchCameraView[\"default\"], {\n          onClick: this.handleSwitchCamera\n        }) : null;\n        return /*#__PURE__*/_react[\"default\"].createElement(CameraView, {\n          key: \"camera\"\n        }, /*#__PURE__*/_react[\"default\"].createElement(Video, {\n          isFlipped: this.props.isFlipped,\n          ref: function ref(el) {\n            return _this3.cameraVideo = el;\n          },\n          autoPlay: true,\n          muted: true,\n          playsInline: true\n        }), switchCameraControl);\n      }\n\n      if (isConnecting) {\n        return renderLoadingView();\n      }\n\n      return renderDisconnectedView();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$state3 = this.state,\n          isVideoInputSupported = _this$state3.isVideoInputSupported,\n          isInlineRecordingSupported = _this$state3.isInlineRecordingSupported,\n          thereWasAnError = _this$state3.thereWasAnError,\n          isRecording = _this$state3.isRecording,\n          isCameraOn = _this$state3.isCameraOn,\n          streamIsReady = _this$state3.streamIsReady,\n          isConnecting = _this$state3.isConnecting,\n          isRunningCountdown = _this$state3.isRunningCountdown,\n          isReplayingVideo = _this$state3.isReplayingVideo,\n          isReplayVideoMuted = _this$state3.isReplayVideoMuted;\n      var _this$props3 = this.props,\n          countdownTime = _this$props3.countdownTime,\n          timeLimit = _this$props3.timeLimit,\n          showReplayControls = _this$props3.showReplayControls,\n          replayVideoAutoplayAndLoopOff = _this$props3.replayVideoAutoplayAndLoopOff,\n          renderActions = _this$props3.renderActions,\n          t = _this$props3.t,\n          useVideoInput = _this$props3.useVideoInput,\n          wrapperClassName = _this$props3.wrapperClassName;\n      return /*#__PURE__*/_react[\"default\"].createElement(Wrapper, {\n        className: wrapperClassName\n      }, this.renderCameraView(), renderActions({\n        t: t,\n        isVideoInputSupported: isVideoInputSupported,\n        isInlineRecordingSupported: isInlineRecordingSupported,\n        thereWasAnError: thereWasAnError,\n        isRecording: isRecording,\n        isCameraOn: isCameraOn,\n        streamIsReady: streamIsReady,\n        isConnecting: isConnecting,\n        isRunningCountdown: isRunningCountdown,\n        isReplayingVideo: isReplayingVideo,\n        isReplayVideoMuted: isReplayVideoMuted,\n        countdownTime: countdownTime,\n        timeLimit: timeLimit,\n        showReplayControls: showReplayControls,\n        replayVideoAutoplayAndLoopOff: replayVideoAutoplayAndLoopOff,\n        useVideoInput: useVideoInput,\n        onTurnOnCamera: function onTurnOnCamera() {\n          return _this4.turnOnCamera();\n        },\n        onSwitchCamera: this.handleSwitchCamera,\n        onTurnOffCamera: this.turnOffCamera,\n        onOpenVideoInput: this.handleOpenVideoInput,\n        onStartRecording: this.handleStartRecording,\n        onStopRecording: this.handleStopRecording,\n        onPauseRecording: this.handlePauseRecording,\n        onResumeRecording: this.handleResumeRecording,\n        onStopReplaying: this.handleStopReplaying\n      }));\n    }\n  }]);\n\n  return VideoRecorder;\n}(_react.Component);\n\nexports[\"default\"] = VideoRecorder;\n\n_defineProperty(VideoRecorder, \"propTypes\", {\n  /** Whether or not to start the camera initially */\n  isOnInitially: _propTypes[\"default\"].bool,\n\n  /** Whether or not to display the video flipped (makes sense for user facing camera) */\n  isFlipped: _propTypes[\"default\"].bool,\n\n  /** Pass this if you want to force a specific mime-type for the video */\n  mimeType: _propTypes[\"default\"].string,\n\n  /** How much time to wait until it starts recording (in ms) */\n  countdownTime: _propTypes[\"default\"].number,\n\n  /** Use this if you want to set a time limit for the video (in ms) */\n  timeLimit: _propTypes[\"default\"].number,\n\n  /** Use this if you want to show play/pause/etc. controls on the replay video */\n  showReplayControls: _propTypes[\"default\"].bool,\n\n  /** Use this to turn off autoplay and looping of the replay video. It is recommended to also showReplayControls in order to play */\n  replayVideoAutoplayAndLoopOff: _propTypes[\"default\"].bool,\n\n  /** Use this if you want to customize the constraints passed to getUserMedia() */\n  constraints: _propTypes[\"default\"].shape({\n    audio: _propTypes[\"default\"].any,\n    video: _propTypes[\"default\"].any\n  }),\n  chunkSize: _propTypes[\"default\"].number,\n  dataAvailableTimeout: _propTypes[\"default\"].number,\n  useVideoInput: _propTypes[\"default\"].bool,\n\n  /** Use this to configure the replaying video element's controlslist attribute */\n  videoControlsList: _propTypes[\"default\"].string,\n\n  /** Use this to disable picture in picture mode on the replaying video element */\n  disablePictureInPicture: _propTypes[\"default\"].bool,\n  renderDisconnectedView: _propTypes[\"default\"].func,\n  renderLoadingView: _propTypes[\"default\"].func,\n  renderVideoInputView: _propTypes[\"default\"].func,\n  renderUnsupportedView: _propTypes[\"default\"].func,\n  renderErrorView: _propTypes[\"default\"].func,\n  renderActions: _propTypes[\"default\"].func,\n  cameraViewClassName: _propTypes[\"default\"].string,\n  videoClassName: _propTypes[\"default\"].string,\n  wrapperClassName: _propTypes[\"default\"].string,\n\n  /** Use this to localize the texts */\n  t: _propTypes[\"default\"].func,\n  onCameraOn: _propTypes[\"default\"].func,\n  onTurnOnCamera: _propTypes[\"default\"].func,\n  onSwitchCamera: _propTypes[\"default\"].func,\n  onTurnOffCamera: _propTypes[\"default\"].func,\n  onStartRecording: _propTypes[\"default\"].func,\n  onStopRecording: _propTypes[\"default\"].func,\n  onPauseRecording: _propTypes[\"default\"].func,\n  onResumeRecording: _propTypes[\"default\"].func,\n  onRecordingComplete: _propTypes[\"default\"].func,\n  onOpenVideoInput: _propTypes[\"default\"].func,\n  onStopReplaying: _propTypes[\"default\"].func,\n  onError: _propTypes[\"default\"].func\n});\n\n_defineProperty(VideoRecorder, \"defaultProps\", {\n  renderUnsupportedView: function renderUnsupportedView() {\n    return /*#__PURE__*/_react[\"default\"].createElement(_unsupportedView[\"default\"], null);\n  },\n  renderErrorView: function renderErrorView() {\n    return /*#__PURE__*/_react[\"default\"].createElement(_errorView[\"default\"], null);\n  },\n  renderVideoInputView: function renderVideoInputView(_ref2) {\n    var videoInput = _ref2.videoInput;\n    return /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, videoInput);\n  },\n  renderDisconnectedView: function renderDisconnectedView() {\n    return /*#__PURE__*/_react[\"default\"].createElement(_disconnectedView[\"default\"], null);\n  },\n  renderLoadingView: function renderLoadingView() {\n    return /*#__PURE__*/_react[\"default\"].createElement(_loadingView[\"default\"], null);\n  },\n  t: function t(x) {\n    return x;\n  },\n  renderActions: _renderActions[\"default\"],\n  isFlipped: true,\n  countdownTime: 3000,\n  constraints: CONSTRAINTS,\n  chunkSize: 250,\n  dataAvailableTimeout: 500\n});"],"mappings":"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"},"metadata":{},"sourceType":"script"}