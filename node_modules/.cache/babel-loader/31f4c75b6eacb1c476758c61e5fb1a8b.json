{"ast":null,"code":"/**\n * Module dependencies.\n */\nvar escape = require('./utils').escape;\n/**\n * Extend proto.\n */\n\n\nmodule.exports = function (proto) {\n  // http://www.graphicsmagick.org/GraphicsMagick.html#details-fill\n  proto.fill = function fill(color) {\n    return this.out(\"-fill\", color || \"none\");\n  }; // http://www.graphicsmagick.org/GraphicsMagick.html#details-stroke\n\n\n  proto.stroke = function stroke(color, width) {\n    if (width) {\n      this.strokeWidth(width);\n    }\n\n    return this.out(\"-stroke\", color || \"none\");\n  }; // http://www.graphicsmagick.org/GraphicsMagick.html#details-strokewidth\n\n\n  proto.strokeWidth = function strokeWidth(width) {\n    return this.out(\"-strokewidth\", width);\n  }; // http://www.graphicsmagick.org/GraphicsMagick.html#details-font\n\n\n  proto.font = function font(font, size) {\n    if (size) {\n      this.fontSize(size);\n    }\n\n    return this.out(\"-font\", font);\n  }; // http://www.graphicsmagick.org/GraphicsMagick.html\n\n\n  proto.fontSize = function fontSize(size) {\n    return this.out(\"-pointsize\", size);\n  }; // http://www.graphicsmagick.org/GraphicsMagick.html#details-draw\n\n\n  proto.draw = function draw(args) {\n    return this.out(\"-draw\", [].slice.call(arguments).join(\" \"));\n  }; // http://www.graphicsmagick.org/GraphicsMagick.html#details-draw\n\n\n  proto.drawPoint = function drawPoint(x, y) {\n    return this.draw(\"point\", x + \",\" + y);\n  }; // http://www.graphicsmagick.org/GraphicsMagick.html#details-draw\n\n\n  proto.drawLine = function drawLine(x0, y0, x1, y1) {\n    return this.draw(\"line\", x0 + \",\" + y0, x1 + \",\" + y1);\n  }; // http://www.graphicsmagick.org/GraphicsMagick.html#details-draw\n\n\n  proto.drawRectangle = function drawRectangle(x0, y0, x1, y1, wc, hc) {\n    var shape = \"rectangle\",\n        lastarg;\n\n    if (\"undefined\" !== typeof wc) {\n      shape = \"roundRectangle\";\n\n      if (\"undefined\" === typeof hc) {\n        hc = wc;\n      }\n\n      lastarg = wc + \",\" + hc;\n    }\n\n    return this.draw(shape, x0 + \",\" + y0, x1 + \",\" + y1, lastarg);\n  }; // http://www.graphicsmagick.org/GraphicsMagick.html#details-draw\n\n\n  proto.drawArc = function drawArc(x0, y0, x1, y1, a0, a1) {\n    return this.draw(\"arc\", x0 + \",\" + y0, x1 + \",\" + y1, a0 + \",\" + a1);\n  }; // http://www.graphicsmagick.org/GraphicsMagick.html#details-draw\n\n\n  proto.drawEllipse = function drawEllipse(x0, y0, rx, ry, a0, a1) {\n    if (a0 == undefined) a0 = 0;\n    if (a1 == undefined) a1 = 360;\n    return this.draw(\"ellipse\", x0 + \",\" + y0, rx + \",\" + ry, a0 + \",\" + a1);\n  }; // http://www.graphicsmagick.org/GraphicsMagick.html#details-draw\n\n\n  proto.drawCircle = function drawCircle(x0, y0, x1, y1) {\n    return this.draw(\"circle\", x0 + \",\" + y0, x1 + \",\" + y1);\n  }; // http://www.graphicsmagick.org/GraphicsMagick.html#details-draw\n\n\n  proto.drawPolyline = function drawPolyline() {\n    return this.draw(\"polyline\", formatPoints(arguments));\n  }; // http://www.graphicsmagick.org/GraphicsMagick.html#details-draw\n\n\n  proto.drawPolygon = function drawPolygon() {\n    return this.draw(\"polygon\", formatPoints(arguments));\n  }; // http://www.graphicsmagick.org/GraphicsMagick.html#details-draw\n\n\n  proto.drawBezier = function drawBezier() {\n    return this.draw(\"bezier\", formatPoints(arguments));\n  };\n\n  proto._gravities = [\"northwest\", \"north\", \"northeast\", \"west\", \"center\", \"east\", \"southwest\", \"south\", \"southeast\"]; // http://www.graphicsmagick.org/GraphicsMagick.html#details-draw\n\n  proto.drawText = function drawText(x0, y0, text, gravity) {\n    var gravity = String(gravity || \"\").toLowerCase(),\n        arg = [\"text \" + x0 + \",\" + y0 + \" \" + escape(text)];\n\n    if (~this._gravities.indexOf(gravity)) {\n      arg.unshift(\"gravity\", gravity);\n    }\n\n    return this.draw.apply(this, arg);\n  };\n\n  proto._drawProps = [\"color\", \"matte\"]; // http://www.graphicsmagick.org/GraphicsMagick.html#details-draw\n\n  proto.setDraw = function setDraw(prop, x, y, method) {\n    prop = String(prop || \"\").toLowerCase();\n\n    if (!~this._drawProps.indexOf(prop)) {\n      return this;\n    }\n\n    return this.draw(prop, x + \",\" + y, method);\n  };\n};\n\nfunction formatPoints(points) {\n  var len = points.length,\n      result = [],\n      i = 0;\n\n  for (; i < len; ++i) {\n    result.push(points[i].join(\",\"));\n  }\n\n  return result;\n}","map":{"version":3,"names":["escape","require","module","exports","proto","fill","color","out","stroke","width","strokeWidth","font","size","fontSize","draw","args","slice","call","arguments","join","drawPoint","x","y","drawLine","x0","y0","x1","y1","drawRectangle","wc","hc","shape","lastarg","drawArc","a0","a1","drawEllipse","rx","ry","undefined","drawCircle","drawPolyline","formatPoints","drawPolygon","drawBezier","_gravities","drawText","text","gravity","String","toLowerCase","arg","indexOf","unshift","apply","_drawProps","setDraw","prop","method","points","len","length","result","i","push"],"sources":["/Users/so._.may._.see._.macy/Desktop/tpat/node_modules/gm/lib/drawing.js"],"sourcesContent":["\n/**\n * Module dependencies.\n */\n\nvar escape = require('./utils').escape;\n\n/**\n * Extend proto.\n */\n\nmodule.exports = function (proto) {\n\n  // http://www.graphicsmagick.org/GraphicsMagick.html#details-fill\n  proto.fill = function fill (color) {\n    return this.out(\"-fill\", color || \"none\");\n  }\n\n  // http://www.graphicsmagick.org/GraphicsMagick.html#details-stroke\n  proto.stroke = function stroke (color, width) {\n    if (width) {\n      this.strokeWidth(width);\n    }\n\n    return this.out(\"-stroke\", color || \"none\");\n  }\n\n  // http://www.graphicsmagick.org/GraphicsMagick.html#details-strokewidth\n  proto.strokeWidth = function strokeWidth (width) {\n    return this.out(\"-strokewidth\", width);\n  }\n\n  // http://www.graphicsmagick.org/GraphicsMagick.html#details-font\n  proto.font = function font (font, size) {\n    if (size) {\n      this.fontSize(size);\n    }\n\n    return this.out(\"-font\", font);\n  }\n\n  // http://www.graphicsmagick.org/GraphicsMagick.html\n  proto.fontSize = function fontSize (size) {\n    return this.out(\"-pointsize\", size);\n  }\n\n  // http://www.graphicsmagick.org/GraphicsMagick.html#details-draw\n  proto.draw = function draw (args) {\n    return this.out(\"-draw\", [].slice.call(arguments).join(\" \"));\n  }\n\n  // http://www.graphicsmagick.org/GraphicsMagick.html#details-draw\n  proto.drawPoint = function drawPoint (x, y) {\n    return this.draw(\"point\", x +\",\"+ y);\n  }\n\n  // http://www.graphicsmagick.org/GraphicsMagick.html#details-draw\n  proto.drawLine = function drawLine (x0, y0, x1, y1) {\n    return this.draw(\"line\", x0+\",\"+y0, x1+\",\"+y1);\n  }\n\n  // http://www.graphicsmagick.org/GraphicsMagick.html#details-draw\n  proto.drawRectangle = function drawRectangle (x0, y0, x1, y1, wc, hc) {\n    var shape = \"rectangle\"\n      , lastarg;\n\n    if (\"undefined\" !== typeof wc) {\n      shape = \"roundRectangle\";\n\n      if (\"undefined\" === typeof hc) {\n        hc = wc;\n      }\n\n      lastarg = wc+\",\"+hc;\n    }\n\n    return this.draw(shape, x0+\",\"+y0, x1+\",\"+y1, lastarg);\n  }\n\n  // http://www.graphicsmagick.org/GraphicsMagick.html#details-draw\n  proto.drawArc = function drawArc (x0, y0, x1, y1, a0, a1) {\n    return this.draw(\"arc\", x0+\",\"+y0, x1+\",\"+y1, a0+\",\"+a1);\n  }\n\n  // http://www.graphicsmagick.org/GraphicsMagick.html#details-draw\n  proto.drawEllipse = function drawEllipse (x0, y0, rx, ry, a0, a1) {\n    if (a0 == undefined) a0 = 0;\n    if (a1 == undefined) a1 = 360;\n    return this.draw(\"ellipse\", x0+\",\"+y0, rx+\",\"+ry, a0+\",\"+a1);\n  }\n\n  // http://www.graphicsmagick.org/GraphicsMagick.html#details-draw\n  proto.drawCircle = function drawCircle (x0, y0, x1, y1) {\n    return this.draw(\"circle\", x0+\",\"+y0, x1+\",\"+y1);\n  }\n\n  // http://www.graphicsmagick.org/GraphicsMagick.html#details-draw\n  proto.drawPolyline = function drawPolyline () {\n    return this.draw(\"polyline\", formatPoints(arguments));\n  }\n\n  // http://www.graphicsmagick.org/GraphicsMagick.html#details-draw\n  proto.drawPolygon = function drawPolygon () {\n    return this.draw(\"polygon\", formatPoints(arguments));\n  }\n\n  // http://www.graphicsmagick.org/GraphicsMagick.html#details-draw\n  proto.drawBezier = function drawBezier () {\n    return this.draw(\"bezier\", formatPoints(arguments));\n  }\n\n  proto._gravities = [\n      \"northwest\"\n\t  , \"north\"\n    , \"northeast\"\n\t  , \"west\"\n    , \"center\"\n\t  , \"east\"\n    , \"southwest\"\n    , \"south\"\n    , \"southeast\"];\n\n  // http://www.graphicsmagick.org/GraphicsMagick.html#details-draw\n  proto.drawText = function drawText (x0, y0, text, gravity) {\n    var gravity = String(gravity || \"\").toLowerCase()\n      , arg = [\"text \" + x0 + \",\" + y0 + \" \" + escape(text)];\n\n    if (~this._gravities.indexOf(gravity)) {\n      arg.unshift(\"gravity\", gravity);\n    }\n\n    return this.draw.apply(this, arg);\n  }\n\n  proto._drawProps = [\"color\", \"matte\"];\n\n  // http://www.graphicsmagick.org/GraphicsMagick.html#details-draw\n  proto.setDraw = function setDraw (prop, x, y, method) {\n    prop = String(prop || \"\").toLowerCase();\n\n    if (!~this._drawProps.indexOf(prop)) {\n      return this;\n    }\n\n    return this.draw(prop, x+\",\"+y, method);\n  }\n\n}\n\nfunction formatPoints (points) {\n  var len = points.length\n    , result = []\n    , i = 0;\n\n  for (; i < len; ++i) {\n    result.push(points[i].join(\",\"));\n  }\n\n  return result;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}