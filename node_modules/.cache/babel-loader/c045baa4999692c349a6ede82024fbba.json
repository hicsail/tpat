{"ast":null,"code":"(function (name, definition) {\n  if (typeof define === 'function' && define.amd) {\n    // RequireJS / AMD\n    define(definition);\n  } else if (typeof module !== 'undefined' && module.exports) {\n    // CommonJS / Node.js\n    module.exports = definition();\n  } else {\n    // Direct include\n    window.ysFixWebmDuration = definition();\n  }\n})('fix-webm-duration', function () {\n  /*\r\n   * This is the list of possible WEBM file sections by their IDs.\r\n   * Possible types: Container, Binary, Uint, Int, String, Float, Date\r\n   */\n  var sections = {\n    0xa45dfa3: {\n      name: 'EBML',\n      type: 'Container'\n    },\n    0x286: {\n      name: 'EBMLVersion',\n      type: 'Uint'\n    },\n    0x2f7: {\n      name: 'EBMLReadVersion',\n      type: 'Uint'\n    },\n    0x2f2: {\n      name: 'EBMLMaxIDLength',\n      type: 'Uint'\n    },\n    0x2f3: {\n      name: 'EBMLMaxSizeLength',\n      type: 'Uint'\n    },\n    0x282: {\n      name: 'DocType',\n      type: 'String'\n    },\n    0x287: {\n      name: 'DocTypeVersion',\n      type: 'Uint'\n    },\n    0x285: {\n      name: 'DocTypeReadVersion',\n      type: 'Uint'\n    },\n    0x6c: {\n      name: 'Void',\n      type: 'Binary'\n    },\n    0x3f: {\n      name: 'CRC-32',\n      type: 'Binary'\n    },\n    0xb538667: {\n      name: 'SignatureSlot',\n      type: 'Container'\n    },\n    0x3e8a: {\n      name: 'SignatureAlgo',\n      type: 'Uint'\n    },\n    0x3e9a: {\n      name: 'SignatureHash',\n      type: 'Uint'\n    },\n    0x3ea5: {\n      name: 'SignaturePublicKey',\n      type: 'Binary'\n    },\n    0x3eb5: {\n      name: 'Signature',\n      type: 'Binary'\n    },\n    0x3e5b: {\n      name: 'SignatureElements',\n      type: 'Container'\n    },\n    0x3e7b: {\n      name: 'SignatureElementList',\n      type: 'Container'\n    },\n    0x2532: {\n      name: 'SignedElement',\n      type: 'Binary'\n    },\n    0x8538067: {\n      name: 'Segment',\n      type: 'Container'\n    },\n    0x14d9b74: {\n      name: 'SeekHead',\n      type: 'Container'\n    },\n    0xdbb: {\n      name: 'Seek',\n      type: 'Container'\n    },\n    0x13ab: {\n      name: 'SeekID',\n      type: 'Binary'\n    },\n    0x13ac: {\n      name: 'SeekPosition',\n      type: 'Uint'\n    },\n    0x549a966: {\n      name: 'Info',\n      type: 'Container'\n    },\n    0x33a4: {\n      name: 'SegmentUID',\n      type: 'Binary'\n    },\n    0x3384: {\n      name: 'SegmentFilename',\n      type: 'String'\n    },\n    0x1cb923: {\n      name: 'PrevUID',\n      type: 'Binary'\n    },\n    0x1c83ab: {\n      name: 'PrevFilename',\n      type: 'String'\n    },\n    0x1eb923: {\n      name: 'NextUID',\n      type: 'Binary'\n    },\n    0x1e83bb: {\n      name: 'NextFilename',\n      type: 'String'\n    },\n    0x444: {\n      name: 'SegmentFamily',\n      type: 'Binary'\n    },\n    0x2924: {\n      name: 'ChapterTranslate',\n      type: 'Container'\n    },\n    0x29fc: {\n      name: 'ChapterTranslateEditionUID',\n      type: 'Uint'\n    },\n    0x29bf: {\n      name: 'ChapterTranslateCodec',\n      type: 'Uint'\n    },\n    0x29a5: {\n      name: 'ChapterTranslateID',\n      type: 'Binary'\n    },\n    0xad7b1: {\n      name: 'TimecodeScale',\n      type: 'Uint'\n    },\n    0x489: {\n      name: 'Duration',\n      type: 'Float'\n    },\n    0x461: {\n      name: 'DateUTC',\n      type: 'Date'\n    },\n    0x3ba9: {\n      name: 'Title',\n      type: 'String'\n    },\n    0xd80: {\n      name: 'MuxingApp',\n      type: 'String'\n    },\n    0x1741: {\n      name: 'WritingApp',\n      type: 'String'\n    },\n    // 0xf43b675: { name: 'Cluster', type: 'Container' },\n    0x67: {\n      name: 'Timecode',\n      type: 'Uint'\n    },\n    0x1854: {\n      name: 'SilentTracks',\n      type: 'Container'\n    },\n    0x18d7: {\n      name: 'SilentTrackNumber',\n      type: 'Uint'\n    },\n    0x27: {\n      name: 'Position',\n      type: 'Uint'\n    },\n    0x2b: {\n      name: 'PrevSize',\n      type: 'Uint'\n    },\n    0x23: {\n      name: 'SimpleBlock',\n      type: 'Binary'\n    },\n    0x20: {\n      name: 'BlockGroup',\n      type: 'Container'\n    },\n    0x21: {\n      name: 'Block',\n      type: 'Binary'\n    },\n    0x22: {\n      name: 'BlockVirtual',\n      type: 'Binary'\n    },\n    0x35a1: {\n      name: 'BlockAdditions',\n      type: 'Container'\n    },\n    0x26: {\n      name: 'BlockMore',\n      type: 'Container'\n    },\n    0x6e: {\n      name: 'BlockAddID',\n      type: 'Uint'\n    },\n    0x25: {\n      name: 'BlockAdditional',\n      type: 'Binary'\n    },\n    0x1b: {\n      name: 'BlockDuration',\n      type: 'Uint'\n    },\n    0x7a: {\n      name: 'ReferencePriority',\n      type: 'Uint'\n    },\n    0x7b: {\n      name: 'ReferenceBlock',\n      type: 'Int'\n    },\n    0x7d: {\n      name: 'ReferenceVirtual',\n      type: 'Int'\n    },\n    0x24: {\n      name: 'CodecState',\n      type: 'Binary'\n    },\n    0x35a2: {\n      name: 'DiscardPadding',\n      type: 'Int'\n    },\n    0xe: {\n      name: 'Slices',\n      type: 'Container'\n    },\n    0x68: {\n      name: 'TimeSlice',\n      type: 'Container'\n    },\n    0x4c: {\n      name: 'LaceNumber',\n      type: 'Uint'\n    },\n    0x4d: {\n      name: 'FrameNumber',\n      type: 'Uint'\n    },\n    0x4b: {\n      name: 'BlockAdditionID',\n      type: 'Uint'\n    },\n    0x4e: {\n      name: 'Delay',\n      type: 'Uint'\n    },\n    0x4f: {\n      name: 'SliceDuration',\n      type: 'Uint'\n    },\n    0x48: {\n      name: 'ReferenceFrame',\n      type: 'Container'\n    },\n    0x49: {\n      name: 'ReferenceOffset',\n      type: 'Uint'\n    },\n    0x4a: {\n      name: 'ReferenceTimeCode',\n      type: 'Uint'\n    },\n    0x2f: {\n      name: 'EncryptedBlock',\n      type: 'Binary'\n    },\n    0x654ae6b: {\n      name: 'Tracks',\n      type: 'Container'\n    },\n    0x2e: {\n      name: 'TrackEntry',\n      type: 'Container'\n    },\n    0x57: {\n      name: 'TrackNumber',\n      type: 'Uint'\n    },\n    0x33c5: {\n      name: 'TrackUID',\n      type: 'Uint'\n    },\n    0x3: {\n      name: 'TrackType',\n      type: 'Uint'\n    },\n    0x39: {\n      name: 'FlagEnabled',\n      type: 'Uint'\n    },\n    0x8: {\n      name: 'FlagDefault',\n      type: 'Uint'\n    },\n    0x15aa: {\n      name: 'FlagForced',\n      type: 'Uint'\n    },\n    0x1c: {\n      name: 'FlagLacing',\n      type: 'Uint'\n    },\n    0x2de7: {\n      name: 'MinCache',\n      type: 'Uint'\n    },\n    0x2df8: {\n      name: 'MaxCache',\n      type: 'Uint'\n    },\n    0x3e383: {\n      name: 'DefaultDuration',\n      type: 'Uint'\n    },\n    0x34e7a: {\n      name: 'DefaultDecodedFieldDuration',\n      type: 'Uint'\n    },\n    0x3314f: {\n      name: 'TrackTimecodeScale',\n      type: 'Float'\n    },\n    0x137f: {\n      name: 'TrackOffset',\n      type: 'Int'\n    },\n    0x15ee: {\n      name: 'MaxBlockAdditionID',\n      type: 'Uint'\n    },\n    0x136e: {\n      name: 'Name',\n      type: 'String'\n    },\n    0x2b59c: {\n      name: 'Language',\n      type: 'String'\n    },\n    0x6: {\n      name: 'CodecID',\n      type: 'String'\n    },\n    0x23a2: {\n      name: 'CodecPrivate',\n      type: 'Binary'\n    },\n    0x58688: {\n      name: 'CodecName',\n      type: 'String'\n    },\n    0x3446: {\n      name: 'AttachmentLink',\n      type: 'Uint'\n    },\n    0x1a9697: {\n      name: 'CodecSettings',\n      type: 'String'\n    },\n    0x1b4040: {\n      name: 'CodecInfoURL',\n      type: 'String'\n    },\n    0x6b240: {\n      name: 'CodecDownloadURL',\n      type: 'String'\n    },\n    0x2a: {\n      name: 'CodecDecodeAll',\n      type: 'Uint'\n    },\n    0x2fab: {\n      name: 'TrackOverlay',\n      type: 'Uint'\n    },\n    0x16aa: {\n      name: 'CodecDelay',\n      type: 'Uint'\n    },\n    0x16bb: {\n      name: 'SeekPreRoll',\n      type: 'Uint'\n    },\n    0x2624: {\n      name: 'TrackTranslate',\n      type: 'Container'\n    },\n    0x26fc: {\n      name: 'TrackTranslateEditionUID',\n      type: 'Uint'\n    },\n    0x26bf: {\n      name: 'TrackTranslateCodec',\n      type: 'Uint'\n    },\n    0x26a5: {\n      name: 'TrackTranslateTrackID',\n      type: 'Binary'\n    },\n    0x60: {\n      name: 'Video',\n      type: 'Container'\n    },\n    0x1a: {\n      name: 'FlagInterlaced',\n      type: 'Uint'\n    },\n    0x13b8: {\n      name: 'StereoMode',\n      type: 'Uint'\n    },\n    0x13c0: {\n      name: 'AlphaMode',\n      type: 'Uint'\n    },\n    0x13b9: {\n      name: 'OldStereoMode',\n      type: 'Uint'\n    },\n    0x30: {\n      name: 'PixelWidth',\n      type: 'Uint'\n    },\n    0x3a: {\n      name: 'PixelHeight',\n      type: 'Uint'\n    },\n    0x14aa: {\n      name: 'PixelCropBottom',\n      type: 'Uint'\n    },\n    0x14bb: {\n      name: 'PixelCropTop',\n      type: 'Uint'\n    },\n    0x14cc: {\n      name: 'PixelCropLeft',\n      type: 'Uint'\n    },\n    0x14dd: {\n      name: 'PixelCropRight',\n      type: 'Uint'\n    },\n    0x14b0: {\n      name: 'DisplayWidth',\n      type: 'Uint'\n    },\n    0x14ba: {\n      name: 'DisplayHeight',\n      type: 'Uint'\n    },\n    0x14b2: {\n      name: 'DisplayUnit',\n      type: 'Uint'\n    },\n    0x14b3: {\n      name: 'AspectRatioType',\n      type: 'Uint'\n    },\n    0xeb524: {\n      name: 'ColourSpace',\n      type: 'Binary'\n    },\n    0xfb523: {\n      name: 'GammaValue',\n      type: 'Float'\n    },\n    0x383e3: {\n      name: 'FrameRate',\n      type: 'Float'\n    },\n    0x61: {\n      name: 'Audio',\n      type: 'Container'\n    },\n    0x35: {\n      name: 'SamplingFrequency',\n      type: 'Float'\n    },\n    0x38b5: {\n      name: 'OutputSamplingFrequency',\n      type: 'Float'\n    },\n    0x1f: {\n      name: 'Channels',\n      type: 'Uint'\n    },\n    0x3d7b: {\n      name: 'ChannelPositions',\n      type: 'Binary'\n    },\n    0x2264: {\n      name: 'BitDepth',\n      type: 'Uint'\n    },\n    0x62: {\n      name: 'TrackOperation',\n      type: 'Container'\n    },\n    0x63: {\n      name: 'TrackCombinePlanes',\n      type: 'Container'\n    },\n    0x64: {\n      name: 'TrackPlane',\n      type: 'Container'\n    },\n    0x65: {\n      name: 'TrackPlaneUID',\n      type: 'Uint'\n    },\n    0x66: {\n      name: 'TrackPlaneType',\n      type: 'Uint'\n    },\n    0x69: {\n      name: 'TrackJoinBlocks',\n      type: 'Container'\n    },\n    0x6d: {\n      name: 'TrackJoinUID',\n      type: 'Uint'\n    },\n    0x40: {\n      name: 'TrickTrackUID',\n      type: 'Uint'\n    },\n    0x41: {\n      name: 'TrickTrackSegmentUID',\n      type: 'Binary'\n    },\n    0x46: {\n      name: 'TrickTrackFlag',\n      type: 'Uint'\n    },\n    0x47: {\n      name: 'TrickMasterTrackUID',\n      type: 'Uint'\n    },\n    0x44: {\n      name: 'TrickMasterTrackSegmentUID',\n      type: 'Binary'\n    },\n    0x2d80: {\n      name: 'ContentEncodings',\n      type: 'Container'\n    },\n    0x2240: {\n      name: 'ContentEncoding',\n      type: 'Container'\n    },\n    0x1031: {\n      name: 'ContentEncodingOrder',\n      type: 'Uint'\n    },\n    0x1032: {\n      name: 'ContentEncodingScope',\n      type: 'Uint'\n    },\n    0x1033: {\n      name: 'ContentEncodingType',\n      type: 'Uint'\n    },\n    0x1034: {\n      name: 'ContentCompression',\n      type: 'Container'\n    },\n    0x254: {\n      name: 'ContentCompAlgo',\n      type: 'Uint'\n    },\n    0x255: {\n      name: 'ContentCompSettings',\n      type: 'Binary'\n    },\n    0x1035: {\n      name: 'ContentEncryption',\n      type: 'Container'\n    },\n    0x7e1: {\n      name: 'ContentEncAlgo',\n      type: 'Uint'\n    },\n    0x7e2: {\n      name: 'ContentEncKeyID',\n      type: 'Binary'\n    },\n    0x7e3: {\n      name: 'ContentSignature',\n      type: 'Binary'\n    },\n    0x7e4: {\n      name: 'ContentSigKeyID',\n      type: 'Binary'\n    },\n    0x7e5: {\n      name: 'ContentSigAlgo',\n      type: 'Uint'\n    },\n    0x7e6: {\n      name: 'ContentSigHashAlgo',\n      type: 'Uint'\n    },\n    0xc53bb6b: {\n      name: 'Cues',\n      type: 'Container'\n    },\n    0x3b: {\n      name: 'CuePoint',\n      type: 'Container'\n    },\n    0x33: {\n      name: 'CueTime',\n      type: 'Uint'\n    },\n    0x37: {\n      name: 'CueTrackPositions',\n      type: 'Container'\n    },\n    0x77: {\n      name: 'CueTrack',\n      type: 'Uint'\n    },\n    0x71: {\n      name: 'CueClusterPosition',\n      type: 'Uint'\n    },\n    0x70: {\n      name: 'CueRelativePosition',\n      type: 'Uint'\n    },\n    0x32: {\n      name: 'CueDuration',\n      type: 'Uint'\n    },\n    0x1378: {\n      name: 'CueBlockNumber',\n      type: 'Uint'\n    },\n    0x6a: {\n      name: 'CueCodecState',\n      type: 'Uint'\n    },\n    0x5b: {\n      name: 'CueReference',\n      type: 'Container'\n    },\n    0x16: {\n      name: 'CueRefTime',\n      type: 'Uint'\n    },\n    0x17: {\n      name: 'CueRefCluster',\n      type: 'Uint'\n    },\n    0x135f: {\n      name: 'CueRefNumber',\n      type: 'Uint'\n    },\n    0x6b: {\n      name: 'CueRefCodecState',\n      type: 'Uint'\n    },\n    0x941a469: {\n      name: 'Attachments',\n      type: 'Container'\n    },\n    0x21a7: {\n      name: 'AttachedFile',\n      type: 'Container'\n    },\n    0x67e: {\n      name: 'FileDescription',\n      type: 'String'\n    },\n    0x66e: {\n      name: 'FileName',\n      type: 'String'\n    },\n    0x660: {\n      name: 'FileMimeType',\n      type: 'String'\n    },\n    0x65c: {\n      name: 'FileData',\n      type: 'Binary'\n    },\n    0x6ae: {\n      name: 'FileUID',\n      type: 'Uint'\n    },\n    0x675: {\n      name: 'FileReferral',\n      type: 'Binary'\n    },\n    0x661: {\n      name: 'FileUsedStartTime',\n      type: 'Uint'\n    },\n    0x662: {\n      name: 'FileUsedEndTime',\n      type: 'Uint'\n    },\n    0x43a770: {\n      name: 'Chapters',\n      type: 'Container'\n    },\n    0x5b9: {\n      name: 'EditionEntry',\n      type: 'Container'\n    },\n    0x5bc: {\n      name: 'EditionUID',\n      type: 'Uint'\n    },\n    0x5bd: {\n      name: 'EditionFlagHidden',\n      type: 'Uint'\n    },\n    0x5db: {\n      name: 'EditionFlagDefault',\n      type: 'Uint'\n    },\n    0x5dd: {\n      name: 'EditionFlagOrdered',\n      type: 'Uint'\n    },\n    0x36: {\n      name: 'ChapterAtom',\n      type: 'Container'\n    },\n    0x33c4: {\n      name: 'ChapterUID',\n      type: 'Uint'\n    },\n    0x1654: {\n      name: 'ChapterStringUID',\n      type: 'String'\n    },\n    0x11: {\n      name: 'ChapterTimeStart',\n      type: 'Uint'\n    },\n    0x12: {\n      name: 'ChapterTimeEnd',\n      type: 'Uint'\n    },\n    0x18: {\n      name: 'ChapterFlagHidden',\n      type: 'Uint'\n    },\n    0x598: {\n      name: 'ChapterFlagEnabled',\n      type: 'Uint'\n    },\n    0x2e67: {\n      name: 'ChapterSegmentUID',\n      type: 'Binary'\n    },\n    0x2ebc: {\n      name: 'ChapterSegmentEditionUID',\n      type: 'Uint'\n    },\n    0x23c3: {\n      name: 'ChapterPhysicalEquiv',\n      type: 'Uint'\n    },\n    0xf: {\n      name: 'ChapterTrack',\n      type: 'Container'\n    },\n    0x9: {\n      name: 'ChapterTrackNumber',\n      type: 'Uint'\n    },\n    0x0: {\n      name: 'ChapterDisplay',\n      type: 'Container'\n    },\n    0x5: {\n      name: 'ChapString',\n      type: 'String'\n    },\n    0x37c: {\n      name: 'ChapLanguage',\n      type: 'String'\n    },\n    0x37e: {\n      name: 'ChapCountry',\n      type: 'String'\n    },\n    0x2944: {\n      name: 'ChapProcess',\n      type: 'Container'\n    },\n    0x2955: {\n      name: 'ChapProcessCodecID',\n      type: 'Uint'\n    },\n    0x50d: {\n      name: 'ChapProcessPrivate',\n      type: 'Binary'\n    },\n    0x2911: {\n      name: 'ChapProcessCommand',\n      type: 'Container'\n    },\n    0x2922: {\n      name: 'ChapProcessTime',\n      type: 'Uint'\n    },\n    0x2933: {\n      name: 'ChapProcessData',\n      type: 'Binary'\n    },\n    0x254c367: {\n      name: 'Tags',\n      type: 'Container'\n    },\n    0x3373: {\n      name: 'Tag',\n      type: 'Container'\n    },\n    0x23c0: {\n      name: 'Targets',\n      type: 'Container'\n    },\n    0x28ca: {\n      name: 'TargetTypeValue',\n      type: 'Uint'\n    },\n    0x23ca: {\n      name: 'TargetType',\n      type: 'String'\n    },\n    0x23c5: {\n      name: 'TagTrackUID',\n      type: 'Uint'\n    },\n    0x23c9: {\n      name: 'TagEditionUID',\n      type: 'Uint'\n    },\n    0x23c4: {\n      name: 'TagChapterUID',\n      type: 'Uint'\n    },\n    0x23c6: {\n      name: 'TagAttachmentUID',\n      type: 'Uint'\n    },\n    0x27c8: {\n      name: 'SimpleTag',\n      type: 'Container'\n    },\n    0x5a3: {\n      name: 'TagName',\n      type: 'String'\n    },\n    0x47a: {\n      name: 'TagLanguage',\n      type: 'String'\n    },\n    0x484: {\n      name: 'TagDefault',\n      type: 'Uint'\n    },\n    0x487: {\n      name: 'TagString',\n      type: 'String'\n    },\n    0x485: {\n      name: 'TagBinary',\n      type: 'Binary'\n    }\n  };\n\n  function doInherit(newClass, baseClass) {\n    newClass.prototype = Object.create(baseClass.prototype);\n    newClass.prototype.constructor = newClass;\n  }\n\n  function WebmBase(name, type) {\n    this.name = name || 'Unknown';\n    this.type = type || 'Unknown';\n  }\n\n  WebmBase.prototype.updateBySource = function () {};\n\n  WebmBase.prototype.setSource = function (source) {\n    this.source = source;\n    this.updateBySource();\n  };\n\n  WebmBase.prototype.updateByData = function () {};\n\n  WebmBase.prototype.setData = function (data) {\n    this.data = data;\n    this.updateByData();\n  };\n\n  function WebmUint(name, type) {\n    WebmBase.call(this, name, type || 'Uint');\n  }\n\n  doInherit(WebmUint, WebmBase);\n\n  function padHex(hex) {\n    return hex.length % 2 === 1 ? '0' + hex : hex;\n  }\n\n  WebmUint.prototype.updateBySource = function () {\n    // use hex representation of a number instead of number value\n    this.data = '';\n\n    for (var i = 0; i < this.source.length; i++) {\n      var hex = this.source[i].toString(16);\n      this.data += padHex(hex);\n    }\n  };\n\n  WebmUint.prototype.updateByData = function () {\n    var length = this.data.length / 2;\n    this.source = new Uint8Array(length);\n\n    for (var i = 0; i < length; i++) {\n      var hex = this.data.substr(i * 2, 2);\n      this.source[i] = parseInt(hex, 16);\n    }\n  };\n\n  WebmUint.prototype.getValue = function () {\n    return parseInt(this.data, 16);\n  };\n\n  WebmUint.prototype.setValue = function (value) {\n    this.setData(padHex(value.toString(16)));\n  };\n\n  function WebmFloat(name, type) {\n    WebmBase.call(this, name, type || 'Float');\n  }\n\n  doInherit(WebmFloat, WebmBase);\n\n  WebmFloat.prototype.getFloatArrayType = function () {\n    return this.source && this.source.length === 4 ? Float32Array : Float64Array;\n  };\n\n  WebmFloat.prototype.updateBySource = function () {\n    var byteArray = this.source.reverse();\n    var floatArrayType = this.getFloatArrayType();\n    var floatArray = new floatArrayType(byteArray.buffer);\n    this.data = floatArray[0];\n  };\n\n  WebmFloat.prototype.updateByData = function () {\n    var floatArrayType = this.getFloatArrayType();\n    var floatArray = new floatArrayType([this.data]);\n    var byteArray = new Uint8Array(floatArray.buffer);\n    this.source = byteArray.reverse();\n  };\n\n  WebmFloat.prototype.getValue = function () {\n    return this.data;\n  };\n\n  WebmFloat.prototype.setValue = function (value) {\n    this.setData(value);\n  };\n\n  function WebmContainer(name, type) {\n    WebmBase.call(this, name, type || 'Container');\n  }\n\n  doInherit(WebmContainer, WebmBase);\n\n  WebmContainer.prototype.readByte = function () {\n    return this.source[this.offset++];\n  };\n\n  WebmContainer.prototype.readUint = function () {\n    var firstByte = this.readByte();\n    var bytes = 8 - firstByte.toString(2).length;\n    var value = firstByte - (1 << 7 - bytes);\n\n    for (var i = 0; i < bytes; i++) {\n      // don't use bit operators to support x86\n      value *= 256;\n      value += this.readByte();\n    }\n\n    return value;\n  };\n\n  WebmContainer.prototype.updateBySource = function () {\n    this.data = [];\n\n    for (this.offset = 0; this.offset < this.source.length; this.offset = end) {\n      var id = this.readUint();\n      var len = this.readUint();\n      var end = Math.min(this.offset + len, this.source.length);\n      var data = this.source.slice(this.offset, end);\n      var info = sections[id] || {\n        name: 'Unknown',\n        type: 'Unknown'\n      };\n      var ctr = WebmBase;\n\n      switch (info.type) {\n        case 'Container':\n          ctr = WebmContainer;\n          break;\n\n        case 'Uint':\n          ctr = WebmUint;\n          break;\n\n        case 'Float':\n          ctr = WebmFloat;\n          break;\n      }\n\n      var section = new ctr(info.name, info.type);\n      section.setSource(data);\n      this.data.push({\n        id: id,\n        idHex: id.toString(16),\n        data: section\n      });\n    }\n  };\n\n  WebmContainer.prototype.writeUint = function (x, draft) {\n    for (var bytes = 1, flag = 0x80; x >= flag && bytes < 8; bytes++, flag *= 0x80) {}\n\n    if (!draft) {\n      var value = flag + x;\n\n      for (var i = bytes - 1; i >= 0; i--) {\n        // don't use bit operators to support x86\n        var c = value % 256;\n        this.source[this.offset + i] = c;\n        value = (value - c) / 256;\n      }\n    }\n\n    this.offset += bytes;\n  };\n\n  WebmContainer.prototype.writeSections = function (draft) {\n    this.offset = 0;\n\n    for (var i = 0; i < this.data.length; i++) {\n      var section = this.data[i],\n          content = section.data.source,\n          contentLength = content.length;\n      this.writeUint(section.id, draft);\n      this.writeUint(contentLength, draft);\n\n      if (!draft) {\n        this.source.set(content, this.offset);\n      }\n\n      this.offset += contentLength;\n    }\n\n    return this.offset;\n  };\n\n  WebmContainer.prototype.updateByData = function () {\n    // run without accessing this.source to determine total length - need to know it to create Uint8Array\n    var length = this.writeSections('draft');\n    this.source = new Uint8Array(length); // now really write data\n\n    this.writeSections();\n  };\n\n  WebmContainer.prototype.getSectionById = function (id) {\n    for (var i = 0; i < this.data.length; i++) {\n      var section = this.data[i];\n\n      if (section.id === id) {\n        return section.data;\n      }\n    }\n\n    return null;\n  };\n\n  function WebmFile(source) {\n    WebmContainer.call(this, 'File', 'File');\n    this.setSource(source);\n  }\n\n  doInherit(WebmFile, WebmContainer);\n\n  WebmFile.prototype.fixDuration = function (duration, options) {\n    var logger = options && options.logger;\n\n    if (logger === undefined) {\n      logger = function (message) {\n        console.log(message);\n      };\n    } else if (!logger) {\n      logger = function () {};\n    }\n\n    var segmentSection = this.getSectionById(0x8538067);\n\n    if (!segmentSection) {\n      logger('[fix-webm-duration] Segment section is missing');\n      return false;\n    }\n\n    var infoSection = segmentSection.getSectionById(0x549a966);\n\n    if (!infoSection) {\n      logger('[fix-webm-duration] Info section is missing');\n      return false;\n    }\n\n    var timeScaleSection = infoSection.getSectionById(0xad7b1);\n\n    if (!timeScaleSection) {\n      logger('[fix-webm-duration] TimecodeScale section is missing');\n      return false;\n    }\n\n    var durationSection = infoSection.getSectionById(0x489);\n\n    if (durationSection) {\n      if (durationSection.getValue() <= 0) {\n        logger('[fix-webm-duration] Duration section is present, but the value is empty');\n        durationSection.setValue(duration);\n      } else {\n        logger('[fix-webm-duration] Duration section is present');\n        return false;\n      }\n    } else {\n      logger('[fix-webm-duration] Duration section is missing'); // append Duration section\n\n      durationSection = new WebmFloat('Duration', 'Float');\n      durationSection.setValue(duration);\n      infoSection.data.push({\n        id: 0x489,\n        data: durationSection\n      });\n    } // set default time scale to 1 millisecond (1000000 nanoseconds)\n\n\n    timeScaleSection.setValue(1000000);\n    infoSection.updateByData();\n    segmentSection.updateByData();\n    this.updateByData();\n    return true;\n  };\n\n  WebmFile.prototype.toBlob = function (mimeType) {\n    return new Blob([this.source.buffer], {\n      type: mimeType || 'video/webm'\n    });\n  };\n\n  function fixWebmDuration(blob, duration, callback, options) {\n    // The callback may be omitted - then the third argument is options\n    if (typeof callback === \"object\") {\n      options = callback;\n      callback = undefined;\n    }\n\n    if (!callback) {\n      return new Promise(function (resolve) {\n        fixWebmDuration(blob, duration, resolve, options);\n      });\n    }\n\n    try {\n      var reader = new FileReader();\n\n      reader.onloadend = function () {\n        try {\n          var file = new WebmFile(new Uint8Array(reader.result));\n\n          if (file.fixDuration(duration, options)) {\n            blob = file.toBlob(blob.type);\n          }\n        } catch (ex) {// ignore\n        }\n\n        callback(blob);\n      };\n\n      reader.readAsArrayBuffer(blob);\n    } catch (ex) {\n      callback(blob);\n    }\n  } // Support AMD import default\n\n\n  fixWebmDuration.default = fixWebmDuration;\n  return fixWebmDuration;\n});","map":{"version":3,"names":["name","definition","define","amd","module","exports","window","ysFixWebmDuration","sections","type","doInherit","newClass","baseClass","prototype","Object","create","constructor","WebmBase","updateBySource","setSource","source","updateByData","setData","data","WebmUint","call","padHex","hex","length","i","toString","Uint8Array","substr","parseInt","getValue","setValue","value","WebmFloat","getFloatArrayType","Float32Array","Float64Array","byteArray","reverse","floatArrayType","floatArray","buffer","WebmContainer","readByte","offset","readUint","firstByte","bytes","end","id","len","Math","min","slice","info","ctr","section","push","idHex","writeUint","x","draft","flag","c","writeSections","content","contentLength","set","getSectionById","WebmFile","fixDuration","duration","options","logger","undefined","message","console","log","segmentSection","infoSection","timeScaleSection","durationSection","toBlob","mimeType","Blob","fixWebmDuration","blob","callback","Promise","resolve","reader","FileReader","onloadend","file","result","ex","readAsArrayBuffer","default"],"sources":["/Users/so._.may._.see._.macy/tpat/node_modules/fix-webm-duration/fix-webm-duration.js"],"sourcesContent":["(function (name, definition) {\r\n    if (typeof define === 'function' && define.amd) { // RequireJS / AMD\r\n        define(definition);\r\n    } else if (typeof module !== 'undefined' && module.exports) { // CommonJS / Node.js\r\n        module.exports = definition();\r\n    } else { // Direct include\r\n        window.ysFixWebmDuration = definition();\r\n    }\r\n})('fix-webm-duration', function () {\r\n    /*\r\n     * This is the list of possible WEBM file sections by their IDs.\r\n     * Possible types: Container, Binary, Uint, Int, String, Float, Date\r\n     */\r\n    var sections = {\r\n        0xa45dfa3: { name: 'EBML', type: 'Container' },\r\n        0x286: { name: 'EBMLVersion', type: 'Uint' },\r\n        0x2f7: { name: 'EBMLReadVersion', type: 'Uint' },\r\n        0x2f2: { name: 'EBMLMaxIDLength', type: 'Uint' },\r\n        0x2f3: { name: 'EBMLMaxSizeLength', type: 'Uint' },\r\n        0x282: { name: 'DocType', type: 'String' },\r\n        0x287: { name: 'DocTypeVersion', type: 'Uint' },\r\n        0x285: { name: 'DocTypeReadVersion', type: 'Uint' },\r\n        0x6c: { name: 'Void', type: 'Binary' },\r\n        0x3f: { name: 'CRC-32', type: 'Binary' },\r\n        0xb538667: { name: 'SignatureSlot', type: 'Container' },\r\n        0x3e8a: { name: 'SignatureAlgo', type: 'Uint' },\r\n        0x3e9a: { name: 'SignatureHash', type: 'Uint' },\r\n        0x3ea5: { name: 'SignaturePublicKey', type: 'Binary' },\r\n        0x3eb5: { name: 'Signature', type: 'Binary' },\r\n        0x3e5b: { name: 'SignatureElements', type: 'Container' },\r\n        0x3e7b: { name: 'SignatureElementList', type: 'Container' },\r\n        0x2532: { name: 'SignedElement', type: 'Binary' },\r\n        0x8538067: { name: 'Segment', type: 'Container' },\r\n        0x14d9b74: { name: 'SeekHead', type: 'Container' },\r\n        0xdbb: { name: 'Seek', type: 'Container' },\r\n        0x13ab: { name: 'SeekID', type: 'Binary' },\r\n        0x13ac: { name: 'SeekPosition', type: 'Uint' },\r\n        0x549a966: { name: 'Info', type: 'Container' },\r\n        0x33a4: { name: 'SegmentUID', type: 'Binary' },\r\n        0x3384: { name: 'SegmentFilename', type: 'String' },\r\n        0x1cb923: { name: 'PrevUID', type: 'Binary' },\r\n        0x1c83ab: { name: 'PrevFilename', type: 'String' },\r\n        0x1eb923: { name: 'NextUID', type: 'Binary' },\r\n        0x1e83bb: { name: 'NextFilename', type: 'String' },\r\n        0x444: { name: 'SegmentFamily', type: 'Binary' },\r\n        0x2924: { name: 'ChapterTranslate', type: 'Container' },\r\n        0x29fc: { name: 'ChapterTranslateEditionUID', type: 'Uint' },\r\n        0x29bf: { name: 'ChapterTranslateCodec', type: 'Uint' },\r\n        0x29a5: { name: 'ChapterTranslateID', type: 'Binary' },\r\n        0xad7b1: { name: 'TimecodeScale', type: 'Uint' },\r\n        0x489: { name: 'Duration', type: 'Float' },\r\n        0x461: { name: 'DateUTC', type: 'Date' },\r\n        0x3ba9: { name: 'Title', type: 'String' },\r\n        0xd80: { name: 'MuxingApp', type: 'String' },\r\n        0x1741: { name: 'WritingApp', type: 'String' },\r\n        // 0xf43b675: { name: 'Cluster', type: 'Container' },\r\n        0x67: { name: 'Timecode', type: 'Uint' },\r\n        0x1854: { name: 'SilentTracks', type: 'Container' },\r\n        0x18d7: { name: 'SilentTrackNumber', type: 'Uint' },\r\n        0x27: { name: 'Position', type: 'Uint' },\r\n        0x2b: { name: 'PrevSize', type: 'Uint' },\r\n        0x23: { name: 'SimpleBlock', type: 'Binary' },\r\n        0x20: { name: 'BlockGroup', type: 'Container' },\r\n        0x21: { name: 'Block', type: 'Binary' },\r\n        0x22: { name: 'BlockVirtual', type: 'Binary' },\r\n        0x35a1: { name: 'BlockAdditions', type: 'Container' },\r\n        0x26: { name: 'BlockMore', type: 'Container' },\r\n        0x6e: { name: 'BlockAddID', type: 'Uint' },\r\n        0x25: { name: 'BlockAdditional', type: 'Binary' },\r\n        0x1b: { name: 'BlockDuration', type: 'Uint' },\r\n        0x7a: { name: 'ReferencePriority', type: 'Uint' },\r\n        0x7b: { name: 'ReferenceBlock', type: 'Int' },\r\n        0x7d: { name: 'ReferenceVirtual', type: 'Int' },\r\n        0x24: { name: 'CodecState', type: 'Binary' },\r\n        0x35a2: { name: 'DiscardPadding', type: 'Int' },\r\n        0xe: { name: 'Slices', type: 'Container' },\r\n        0x68: { name: 'TimeSlice', type: 'Container' },\r\n        0x4c: { name: 'LaceNumber', type: 'Uint' },\r\n        0x4d: { name: 'FrameNumber', type: 'Uint' },\r\n        0x4b: { name: 'BlockAdditionID', type: 'Uint' },\r\n        0x4e: { name: 'Delay', type: 'Uint' },\r\n        0x4f: { name: 'SliceDuration', type: 'Uint' },\r\n        0x48: { name: 'ReferenceFrame', type: 'Container' },\r\n        0x49: { name: 'ReferenceOffset', type: 'Uint' },\r\n        0x4a: { name: 'ReferenceTimeCode', type: 'Uint' },\r\n        0x2f: { name: 'EncryptedBlock', type: 'Binary' },\r\n        0x654ae6b: { name: 'Tracks', type: 'Container' },\r\n        0x2e: { name: 'TrackEntry', type: 'Container' },\r\n        0x57: { name: 'TrackNumber', type: 'Uint' },\r\n        0x33c5: { name: 'TrackUID', type: 'Uint' },\r\n        0x3: { name: 'TrackType', type: 'Uint' },\r\n        0x39: { name: 'FlagEnabled', type: 'Uint' },\r\n        0x8: { name: 'FlagDefault', type: 'Uint' },\r\n        0x15aa: { name: 'FlagForced', type: 'Uint' },\r\n        0x1c: { name: 'FlagLacing', type: 'Uint' },\r\n        0x2de7: { name: 'MinCache', type: 'Uint' },\r\n        0x2df8: { name: 'MaxCache', type: 'Uint' },\r\n        0x3e383: { name: 'DefaultDuration', type: 'Uint' },\r\n        0x34e7a: { name: 'DefaultDecodedFieldDuration', type: 'Uint' },\r\n        0x3314f: { name: 'TrackTimecodeScale', type: 'Float' },\r\n        0x137f: { name: 'TrackOffset', type: 'Int' },\r\n        0x15ee: { name: 'MaxBlockAdditionID', type: 'Uint' },\r\n        0x136e: { name: 'Name', type: 'String' },\r\n        0x2b59c: { name: 'Language', type: 'String' },\r\n        0x6: { name: 'CodecID', type: 'String' },\r\n        0x23a2: { name: 'CodecPrivate', type: 'Binary' },\r\n        0x58688: { name: 'CodecName', type: 'String' },\r\n        0x3446: { name: 'AttachmentLink', type: 'Uint' },\r\n        0x1a9697: { name: 'CodecSettings', type: 'String' },\r\n        0x1b4040: { name: 'CodecInfoURL', type: 'String' },\r\n        0x6b240: { name: 'CodecDownloadURL', type: 'String' },\r\n        0x2a: { name: 'CodecDecodeAll', type: 'Uint' },\r\n        0x2fab: { name: 'TrackOverlay', type: 'Uint' },\r\n        0x16aa: { name: 'CodecDelay', type: 'Uint' },\r\n        0x16bb: { name: 'SeekPreRoll', type: 'Uint' },\r\n        0x2624: { name: 'TrackTranslate', type: 'Container' },\r\n        0x26fc: { name: 'TrackTranslateEditionUID', type: 'Uint' },\r\n        0x26bf: { name: 'TrackTranslateCodec', type: 'Uint' },\r\n        0x26a5: { name: 'TrackTranslateTrackID', type: 'Binary' },\r\n        0x60: { name: 'Video', type: 'Container' },\r\n        0x1a: { name: 'FlagInterlaced', type: 'Uint' },\r\n        0x13b8: { name: 'StereoMode', type: 'Uint' },\r\n        0x13c0: { name: 'AlphaMode', type: 'Uint' },\r\n        0x13b9: { name: 'OldStereoMode', type: 'Uint' },\r\n        0x30: { name: 'PixelWidth', type: 'Uint' },\r\n        0x3a: { name: 'PixelHeight', type: 'Uint' },\r\n        0x14aa: { name: 'PixelCropBottom', type: 'Uint' },\r\n        0x14bb: { name: 'PixelCropTop', type: 'Uint' },\r\n        0x14cc: { name: 'PixelCropLeft', type: 'Uint' },\r\n        0x14dd: { name: 'PixelCropRight', type: 'Uint' },\r\n        0x14b0: { name: 'DisplayWidth', type: 'Uint' },\r\n        0x14ba: { name: 'DisplayHeight', type: 'Uint' },\r\n        0x14b2: { name: 'DisplayUnit', type: 'Uint' },\r\n        0x14b3: { name: 'AspectRatioType', type: 'Uint' },\r\n        0xeb524: { name: 'ColourSpace', type: 'Binary' },\r\n        0xfb523: { name: 'GammaValue', type: 'Float' },\r\n        0x383e3: { name: 'FrameRate', type: 'Float' },\r\n        0x61: { name: 'Audio', type: 'Container' },\r\n        0x35: { name: 'SamplingFrequency', type: 'Float' },\r\n        0x38b5: { name: 'OutputSamplingFrequency', type: 'Float' },\r\n        0x1f: { name: 'Channels', type: 'Uint' },\r\n        0x3d7b: { name: 'ChannelPositions', type: 'Binary' },\r\n        0x2264: { name: 'BitDepth', type: 'Uint' },\r\n        0x62: { name: 'TrackOperation', type: 'Container' },\r\n        0x63: { name: 'TrackCombinePlanes', type: 'Container' },\r\n        0x64: { name: 'TrackPlane', type: 'Container' },\r\n        0x65: { name: 'TrackPlaneUID', type: 'Uint' },\r\n        0x66: { name: 'TrackPlaneType', type: 'Uint' },\r\n        0x69: { name: 'TrackJoinBlocks', type: 'Container' },\r\n        0x6d: { name: 'TrackJoinUID', type: 'Uint' },\r\n        0x40: { name: 'TrickTrackUID', type: 'Uint' },\r\n        0x41: { name: 'TrickTrackSegmentUID', type: 'Binary' },\r\n        0x46: { name: 'TrickTrackFlag', type: 'Uint' },\r\n        0x47: { name: 'TrickMasterTrackUID', type: 'Uint' },\r\n        0x44: { name: 'TrickMasterTrackSegmentUID', type: 'Binary' },\r\n        0x2d80: { name: 'ContentEncodings', type: 'Container' },\r\n        0x2240: { name: 'ContentEncoding', type: 'Container' },\r\n        0x1031: { name: 'ContentEncodingOrder', type: 'Uint' },\r\n        0x1032: { name: 'ContentEncodingScope', type: 'Uint' },\r\n        0x1033: { name: 'ContentEncodingType', type: 'Uint' },\r\n        0x1034: { name: 'ContentCompression', type: 'Container' },\r\n        0x254: { name: 'ContentCompAlgo', type: 'Uint' },\r\n        0x255: { name: 'ContentCompSettings', type: 'Binary' },\r\n        0x1035: { name: 'ContentEncryption', type: 'Container' },\r\n        0x7e1: { name: 'ContentEncAlgo', type: 'Uint' },\r\n        0x7e2: { name: 'ContentEncKeyID', type: 'Binary' },\r\n        0x7e3: { name: 'ContentSignature', type: 'Binary' },\r\n        0x7e4: { name: 'ContentSigKeyID', type: 'Binary' },\r\n        0x7e5: { name: 'ContentSigAlgo', type: 'Uint' },\r\n        0x7e6: { name: 'ContentSigHashAlgo', type: 'Uint' },\r\n        0xc53bb6b: { name: 'Cues', type: 'Container' },\r\n        0x3b: { name: 'CuePoint', type: 'Container' },\r\n        0x33: { name: 'CueTime', type: 'Uint' },\r\n        0x37: { name: 'CueTrackPositions', type: 'Container' },\r\n        0x77: { name: 'CueTrack', type: 'Uint' },\r\n        0x71: { name: 'CueClusterPosition', type: 'Uint' },\r\n        0x70: { name: 'CueRelativePosition', type: 'Uint' },\r\n        0x32: { name: 'CueDuration', type: 'Uint' },\r\n        0x1378: { name: 'CueBlockNumber', type: 'Uint' },\r\n        0x6a: { name: 'CueCodecState', type: 'Uint' },\r\n        0x5b: { name: 'CueReference', type: 'Container' },\r\n        0x16: { name: 'CueRefTime', type: 'Uint' },\r\n        0x17: { name: 'CueRefCluster', type: 'Uint' },\r\n        0x135f: { name: 'CueRefNumber', type: 'Uint' },\r\n        0x6b: { name: 'CueRefCodecState', type: 'Uint' },\r\n        0x941a469: { name: 'Attachments', type: 'Container' },\r\n        0x21a7: { name: 'AttachedFile', type: 'Container' },\r\n        0x67e: { name: 'FileDescription', type: 'String' },\r\n        0x66e: { name: 'FileName', type: 'String' },\r\n        0x660: { name: 'FileMimeType', type: 'String' },\r\n        0x65c: { name: 'FileData', type: 'Binary' },\r\n        0x6ae: { name: 'FileUID', type: 'Uint' },\r\n        0x675: { name: 'FileReferral', type: 'Binary' },\r\n        0x661: { name: 'FileUsedStartTime', type: 'Uint' },\r\n        0x662: { name: 'FileUsedEndTime', type: 'Uint' },\r\n        0x43a770: { name: 'Chapters', type: 'Container' },\r\n        0x5b9: { name: 'EditionEntry', type: 'Container' },\r\n        0x5bc: { name: 'EditionUID', type: 'Uint' },\r\n        0x5bd: { name: 'EditionFlagHidden', type: 'Uint' },\r\n        0x5db: { name: 'EditionFlagDefault', type: 'Uint' },\r\n        0x5dd: { name: 'EditionFlagOrdered', type: 'Uint' },\r\n        0x36: { name: 'ChapterAtom', type: 'Container' },\r\n        0x33c4: { name: 'ChapterUID', type: 'Uint' },\r\n        0x1654: { name: 'ChapterStringUID', type: 'String' },\r\n        0x11: { name: 'ChapterTimeStart', type: 'Uint' },\r\n        0x12: { name: 'ChapterTimeEnd', type: 'Uint' },\r\n        0x18: { name: 'ChapterFlagHidden', type: 'Uint' },\r\n        0x598: { name: 'ChapterFlagEnabled', type: 'Uint' },\r\n        0x2e67: { name: 'ChapterSegmentUID', type: 'Binary' },\r\n        0x2ebc: { name: 'ChapterSegmentEditionUID', type: 'Uint' },\r\n        0x23c3: { name: 'ChapterPhysicalEquiv', type: 'Uint' },\r\n        0xf: { name: 'ChapterTrack', type: 'Container' },\r\n        0x9: { name: 'ChapterTrackNumber', type: 'Uint' },\r\n        0x0: { name: 'ChapterDisplay', type: 'Container' },\r\n        0x5: { name: 'ChapString', type: 'String' },\r\n        0x37c: { name: 'ChapLanguage', type: 'String' },\r\n        0x37e: { name: 'ChapCountry', type: 'String' },\r\n        0x2944: { name: 'ChapProcess', type: 'Container' },\r\n        0x2955: { name: 'ChapProcessCodecID', type: 'Uint' },\r\n        0x50d: { name: 'ChapProcessPrivate', type: 'Binary' },\r\n        0x2911: { name: 'ChapProcessCommand', type: 'Container' },\r\n        0x2922: { name: 'ChapProcessTime', type: 'Uint' },\r\n        0x2933: { name: 'ChapProcessData', type: 'Binary' },\r\n        0x254c367: { name: 'Tags', type: 'Container' },\r\n        0x3373: { name: 'Tag', type: 'Container' },\r\n        0x23c0: { name: 'Targets', type: 'Container' },\r\n        0x28ca: { name: 'TargetTypeValue', type: 'Uint' },\r\n        0x23ca: { name: 'TargetType', type: 'String' },\r\n        0x23c5: { name: 'TagTrackUID', type: 'Uint' },\r\n        0x23c9: { name: 'TagEditionUID', type: 'Uint' },\r\n        0x23c4: { name: 'TagChapterUID', type: 'Uint' },\r\n        0x23c6: { name: 'TagAttachmentUID', type: 'Uint' },\r\n        0x27c8: { name: 'SimpleTag', type: 'Container' },\r\n        0x5a3: { name: 'TagName', type: 'String' },\r\n        0x47a: { name: 'TagLanguage', type: 'String' },\r\n        0x484: { name: 'TagDefault', type: 'Uint' },\r\n        0x487: { name: 'TagString', type: 'String' },\r\n        0x485: { name: 'TagBinary', type: 'Binary' }\r\n    };\r\n\r\n    function doInherit(newClass, baseClass) {\r\n        newClass.prototype = Object.create(baseClass.prototype);\r\n        newClass.prototype.constructor = newClass;\r\n    }\r\n\r\n    function WebmBase(name, type) {\r\n        this.name = name || 'Unknown';\r\n        this.type = type || 'Unknown';\r\n    }\r\n    WebmBase.prototype.updateBySource = function() { };\r\n    WebmBase.prototype.setSource = function(source) {\r\n        this.source = source;\r\n        this.updateBySource();\r\n    };\r\n    WebmBase.prototype.updateByData = function() { };\r\n    WebmBase.prototype.setData = function(data) {\r\n        this.data = data;\r\n        this.updateByData();\r\n    };\r\n\r\n    function WebmUint(name, type) {\r\n        WebmBase.call(this, name, type || 'Uint');\r\n    }\r\n    doInherit(WebmUint, WebmBase);\r\n    function padHex(hex) {\r\n        return hex.length % 2 === 1 ? '0' + hex : hex;\r\n    }\r\n    WebmUint.prototype.updateBySource = function() {\r\n        // use hex representation of a number instead of number value\r\n        this.data = '';\r\n        for (var i = 0; i < this.source.length; i++) {\r\n            var hex = this.source[i].toString(16);\r\n            this.data += padHex(hex);\r\n        }\r\n    };\r\n    WebmUint.prototype.updateByData = function() {\r\n        var length = this.data.length / 2;\r\n        this.source = new Uint8Array(length);\r\n        for (var i = 0; i < length; i++) {\r\n            var hex = this.data.substr(i * 2, 2);\r\n            this.source[i] = parseInt(hex, 16);\r\n        }\r\n    };\r\n    WebmUint.prototype.getValue = function() {\r\n        return parseInt(this.data, 16);\r\n    };\r\n    WebmUint.prototype.setValue = function(value) {\r\n        this.setData(padHex(value.toString(16)));\r\n    };\r\n\r\n    function WebmFloat(name, type) {\r\n        WebmBase.call(this, name, type || 'Float');\r\n    }\r\n    doInherit(WebmFloat, WebmBase);\r\n    WebmFloat.prototype.getFloatArrayType = function() {\r\n        return this.source && this.source.length === 4 ? Float32Array : Float64Array;\r\n    };\r\n    WebmFloat.prototype.updateBySource = function() {\r\n        var byteArray = this.source.reverse();\r\n        var floatArrayType = this.getFloatArrayType();\r\n        var floatArray = new floatArrayType(byteArray.buffer);\r\n        this.data = floatArray[0];\r\n    };\r\n    WebmFloat.prototype.updateByData = function() {\r\n        var floatArrayType = this.getFloatArrayType();\r\n        var floatArray = new floatArrayType([ this.data ]);\r\n        var byteArray = new Uint8Array(floatArray.buffer);\r\n        this.source = byteArray.reverse();\r\n    };\r\n    WebmFloat.prototype.getValue = function() {\r\n        return this.data;\r\n    };\r\n    WebmFloat.prototype.setValue = function(value) {\r\n        this.setData(value);\r\n    };\r\n\r\n    function WebmContainer(name, type) {\r\n        WebmBase.call(this, name, type || 'Container');\r\n    }\r\n    doInherit(WebmContainer, WebmBase);\r\n    WebmContainer.prototype.readByte = function() {\r\n        return this.source[this.offset++];\r\n    };\r\n    WebmContainer.prototype.readUint = function() {\r\n        var firstByte = this.readByte();\r\n        var bytes = 8 - firstByte.toString(2).length;\r\n        var value = firstByte - (1 << (7 - bytes));\r\n        for (var i = 0; i < bytes; i++) {\r\n            // don't use bit operators to support x86\r\n            value *= 256;\r\n            value += this.readByte();\r\n        }\r\n        return value;\r\n    };\r\n    WebmContainer.prototype.updateBySource = function() {\r\n        this.data = [];\r\n        for (this.offset = 0; this.offset < this.source.length; this.offset = end) {\r\n            var id = this.readUint();\r\n            var len = this.readUint();\r\n            var end = Math.min(this.offset + len, this.source.length);\r\n            var data = this.source.slice(this.offset, end);\r\n\r\n            var info = sections[id] || { name: 'Unknown', type: 'Unknown' };\r\n            var ctr = WebmBase;\r\n            switch (info.type) {\r\n                case 'Container':\r\n                    ctr = WebmContainer;\r\n                    break;\r\n                case 'Uint':\r\n                    ctr = WebmUint;\r\n                    break;\r\n                case 'Float':\r\n                    ctr = WebmFloat;\r\n                    break;\r\n            }\r\n            var section = new ctr(info.name, info.type);\r\n            section.setSource(data);\r\n            this.data.push({\r\n                id: id,\r\n                idHex: id.toString(16),\r\n                data: section\r\n            });\r\n        }\r\n    };\r\n    WebmContainer.prototype.writeUint = function(x, draft) {\r\n        for (var bytes = 1, flag = 0x80; x >= flag && bytes < 8; bytes++, flag *= 0x80) { }\r\n\r\n        if (!draft) {\r\n            var value = flag + x;\r\n            for (var i = bytes - 1; i >= 0; i--) {\r\n                // don't use bit operators to support x86\r\n                var c = value % 256;\r\n                this.source[this.offset + i] = c;\r\n                value = (value - c) / 256;\r\n            }\r\n        }\r\n\r\n        this.offset += bytes;\r\n    };\r\n    WebmContainer.prototype.writeSections = function(draft) {\r\n        this.offset = 0;\r\n        for (var i = 0; i < this.data.length; i++) {\r\n            var section = this.data[i],\r\n                content = section.data.source,\r\n                contentLength = content.length;\r\n            this.writeUint(section.id, draft);\r\n            this.writeUint(contentLength, draft);\r\n            if (!draft) {\r\n                this.source.set(content, this.offset);\r\n            }\r\n            this.offset += contentLength;\r\n        }\r\n        return this.offset;\r\n    };\r\n    WebmContainer.prototype.updateByData = function() {\r\n        // run without accessing this.source to determine total length - need to know it to create Uint8Array\r\n        var length = this.writeSections('draft');\r\n        this.source = new Uint8Array(length);\r\n        // now really write data\r\n        this.writeSections();\r\n    };\r\n    WebmContainer.prototype.getSectionById = function(id) {\r\n        for (var i = 0; i < this.data.length; i++) {\r\n            var section = this.data[i];\r\n            if (section.id === id) {\r\n                return section.data;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n\r\n    function WebmFile(source) {\r\n        WebmContainer.call(this, 'File', 'File');\r\n        this.setSource(source);\r\n    }\r\n    doInherit(WebmFile, WebmContainer);\r\n    WebmFile.prototype.fixDuration = function(duration, options) {\r\n        var logger = options && options.logger;\r\n        if (logger === undefined) {\r\n            logger = function(message) {\r\n                console.log(message);\r\n            };\r\n        } else if (!logger) {\r\n            logger = function() { };\r\n        }\r\n\r\n        var segmentSection = this.getSectionById(0x8538067);\r\n        if (!segmentSection) {\r\n            logger('[fix-webm-duration] Segment section is missing');\r\n            return false;\r\n        }\r\n\r\n        var infoSection = segmentSection.getSectionById(0x549a966);\r\n        if (!infoSection) {\r\n            logger('[fix-webm-duration] Info section is missing');\r\n            return false;\r\n        }\r\n\r\n        var timeScaleSection = infoSection.getSectionById(0xad7b1);\r\n        if (!timeScaleSection) {\r\n            logger('[fix-webm-duration] TimecodeScale section is missing');\r\n            return false;\r\n        }\r\n\r\n        var durationSection = infoSection.getSectionById(0x489);\r\n        if (durationSection) {\r\n            if (durationSection.getValue() <= 0) {\r\n                logger('[fix-webm-duration] Duration section is present, but the value is empty');\r\n                durationSection.setValue(duration);\r\n            } else {\r\n                logger('[fix-webm-duration] Duration section is present');\r\n                return false;\r\n            }\r\n        } else {\r\n            logger('[fix-webm-duration] Duration section is missing');\r\n            // append Duration section\r\n            durationSection = new WebmFloat('Duration', 'Float');\r\n            durationSection.setValue(duration);\r\n            infoSection.data.push({\r\n                id: 0x489,\r\n                data: durationSection\r\n            });\r\n        }\r\n\r\n        // set default time scale to 1 millisecond (1000000 nanoseconds)\r\n        timeScaleSection.setValue(1000000);\r\n        infoSection.updateByData();\r\n        segmentSection.updateByData();\r\n        this.updateByData();\r\n\r\n        return true;\r\n    };\r\n    WebmFile.prototype.toBlob = function(mimeType) {\r\n        return new Blob([ this.source.buffer ], { type: mimeType || 'video/webm' });\r\n    };\r\n\r\n    function fixWebmDuration(blob, duration, callback, options) {\r\n        // The callback may be omitted - then the third argument is options\r\n        if (typeof callback === \"object\") {\r\n            options = callback;\r\n            callback = undefined;\r\n        }\r\n\r\n        if (!callback) {\r\n            return new Promise(function(resolve) {\r\n                fixWebmDuration(blob, duration, resolve, options);\r\n            });\r\n        }\r\n\r\n        try {\r\n            var reader = new FileReader();\r\n            reader.onloadend = function() {\r\n                try {\r\n                    var file = new WebmFile(new Uint8Array(reader.result));\r\n                    if (file.fixDuration(duration, options)) {\r\n                        blob = file.toBlob(blob.type);\r\n                    }\r\n                } catch (ex) {\r\n                    // ignore\r\n                }\r\n                callback(blob);\r\n            };\r\n            reader.readAsArrayBuffer(blob);\r\n        } catch (ex) {\r\n            callback(blob);\r\n        }\r\n    }\r\n\r\n    // Support AMD import default\r\n    fixWebmDuration.default = fixWebmDuration;\r\n\r\n    return fixWebmDuration;\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}